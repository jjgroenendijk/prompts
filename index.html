<!DOCTYPE html><!--TPhATwRfMDxq9_9GUzk2V--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/prompts/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/prompts/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/prompts/_next/static/chunks/1d5639018d1afc60.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/prompts/_next/static/chunks/5531c5ac135a17df.js"/><script src="/prompts/_next/static/chunks/377b553718f70085.js" async=""></script><script src="/prompts/_next/static/chunks/b32a0963684b9933.js" async=""></script><script src="/prompts/_next/static/chunks/turbopack-304b2aa96683f40e.js" async=""></script><script src="/prompts/_next/static/chunks/b4ddc1a8749ef82e.js" async=""></script><script src="/prompts/_next/static/chunks/42879de7b8087bc9.js" async=""></script><script src="/prompts/_next/static/chunks/5ccbe578a5df9eac.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/prompts/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/prompts/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="geist_2ae47f08-module__h69qWW__variable geist_mono_eb58308d-module__w_p2Lq__variable"><div hidden=""><!--$--><!--/$--></div><div class="flex flex-col h-screen bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 overflow-hidden"><header class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 sticky top-0 z-10"><h1 class="text-xl font-bold text-gray-900 dark:text-white truncate">Prompt Rule Selector</h1><div class="flex gap-2 shrink-0"><a href="https://github.com/jjgroenendijk/prompts/new/main?filename=snippets/new-rule.md" target="_blank" rel="noopener noreferrer" class="p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" title="Add New Snippet"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></a><a href="https://github.com/jjgroenendijk/prompts/edit/main/config.yml" target="_blank" rel="noopener noreferrer" class="p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" title="Settings"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1.82.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg></a></div></header><div class="flex-1 flex flex-col md:flex-row overflow-hidden relative"><div class="w-full md:w-2/5 lg:w-1/3 flex flex-col border-r border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50 z-0 h-full"><div class="p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900"><div class="relative"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path></svg></div><input type="text" class="block w-full pl-10 pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-md leading-5 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-colors" placeholder="Search rules..." value=""/></div></div><div class="flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600"><div class="space-y-4 p-4 pb-20"><div class="border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden shadow-sm"><div class="bg-gray-100 dark:bg-gray-800 p-3 flex items-center justify-between select-none sticky top-0 z-0"><div class="flex items-center gap-3"><input type="checkbox" class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500 dark:bg-gray-700 cursor-pointer"/><button class="flex items-center gap-2 text-sm font-bold text-gray-800 dark:text-gray-100 capitalize focus:outline-none hover:text-blue-600 dark:hover:text-blue-400 transition-colors">coding-style<span class="text-xs font-medium text-gray-500 dark:text-gray-400 px-2 py-0.5 bg-white dark:bg-gray-700 rounded-full border border-gray-200 dark:border-gray-600">2</span></button></div><button class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg></button></div><div class="p-2 bg-white dark:bg-gray-900 space-y-2"><div class="p-3 border rounded-md mb-2 transition-colors border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 bg-white dark:bg-gray-800"><div class="flex items-start gap-3"><div class="pt-1"><input type="checkbox" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:bg-gray-700 dark:border-gray-600 cursor-pointer"/></div><div class="flex-1 min-w-0"><div class="flex items-center justify-between mb-1"><h3 class="text-sm font-bold text-gray-900 dark:text-white truncate pr-2" title="Naming Conventions">Naming Conventions</h3><a href="https://github.com/jjgroenendijk/prompts/edit/main/snippets/coding-style/naming-conventions.md" target="_blank" rel="noopener noreferrer" class="text-xs text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 shrink-0 underline decoration-dotted hover:decoration-solid">Edit</a></div><p class="text-xs text-gray-600 dark:text-gray-300 line-clamp-3 break-words opacity-80"># Naming Conventions

Clear, consistent naming is essential for maintainable code. Follow these conventions for better readability.

## General Principles

1. **Be descriptive** - Names should reveal intent
2. **Be consistent** - Follow language conventions
3. **Avoid abbreviations** - Unless universally understood
4. **Use pronounceable names** - Code is read more than written
5. **Avoid mental mapping** - Don&#x27;t make readers translate names

## Variables

### Use meaningful names

```javascript
// Bad
let d; // elapsed time in days
let x = getUserData();

// Good
let elapsedTimeInDays;
let userData = getUserData();
```

### Boolean variables

Prefix with `is`, `has`, `can`, `should`:

```python
# Good
is_active = True
has_permission = check_permission()
can_edit = user.role == &#x27;admin&#x27;
should_notify = user.preferences.notifications
```

### Collections

Use plural names:

```java
// Bad
List&lt;User&gt; userList;
Set&lt;String&gt; nameSet;

// Good
List&lt;User&gt; users;
Set&lt;String&gt; names;
Map&lt;String, Integer&gt; scoresByPlayer;
```

## Functions and Methods

### Use verb phrases

```typescript
// Bad
function data() { }
function user(id) { }

// Good
function fetchData() { }
function getUserById(id: string) { }
function calculateTotal(items: Item[]) { }
function isValidEmail(email: string): boolean { }
```

### Consistent naming patterns

```python
# Getters/Setters
def get_username(self):
    return self._username

def set_username(self, value):
    self._username = value

# Boolean queries
def is_authenticated(self):
    return self._authenticated

def has_permission(self, permission):
    return permission in self._permissions

# Actions
def create_user(data):
    pass

def update_profile(user_id, data):
    pass

def delete_comment(comment_id):
    pass
```

## Classes

### Use nouns or noun phrases

```java
// Bad
class HandleData { }
class DoStuff { }

// Good
class User { }
class ShoppingCart { }
class PaymentProcessor { }
class EmailValidator { }
```

### Avoid generic names

```typescript
// Bad
class Manager { }
class Helper { }
class Utility { }

// Good
class UserSessionManager { }
class StringHelper { }
class DateUtility { }
```

## Constants

### Use UPPER_SNAKE_CASE

```python
MAX_RETRY_ATTEMPTS = 3
DEFAULT_TIMEOUT_SECONDS = 30
API_BASE_URL = &quot;https://api.example.com&quot;
ALLOWED_FILE_EXTENSIONS = [&#x27;.jpg&#x27;, &#x27;.png&#x27;, &#x27;.gif&#x27;]
```

```javascript
const MAX_LOGIN_ATTEMPTS = 5;
const SESSION_TIMEOUT_MS = 3600000;
const ERROR_MESSAGES = {
  NOT_FOUND: &#x27;Resource not found&#x27;,
  UNAUTHORIZED: &#x27;Unauthorized access&#x27;
};
```

## Interfaces and Types

```typescript
// Interfaces: Use &quot;I&quot; prefix or descriptive noun
interface IUser {
  id: string;
  name: string;
}

interface Serializable {
  serialize(): string;
}

// Types: Use descriptive names
type UserId = string;
type Callback = (error: Error | null, data: any) =&gt; void;
type HTTPMethod = &#x27;GET&#x27; | &#x27;POST&#x27; | &#x27;PUT&#x27; | &#x27;DELETE&#x27;;
```

## File Naming

```
components/
  UserProfile.tsx          # PascalCase for components
  user-settings.tsx        # kebab-case alternative
  
utils/
  string-helpers.js        # kebab-case for utilities
  dateFormatter.js         # camelCase alternative
  
constants/
  API_ENDPOINTS.js         # UPPER_SNAKE_CASE
  
tests/
  user.test.js             # Match source file + .test
  integration.spec.js      # Or .spec suffix
```

## Language-Specific Conventions

### Python (PEP 8)

```python
# Variables and functions: snake_case
user_name = &quot;Alice&quot;
def calculate_total_price(items):
    pass

# Classes: PascalCase
class UserProfile:
    pass

# Constants: UPPER_SNAKE_CASE
MAX_CONNECTIONS = 100

# Private members: leading underscore
class Account:
    def __init__(self):
        self._balance = 0  # Protected
        self.__secret = &quot;hidden&quot;  # Private
```

### JavaScript/TypeScript

```typescript
// Variables and functions: camelCase
const userName = &quot;Bob&quot;;
function calculateTotalPrice(items: Item[]): number {
  return items.reduce((sum, item) =&gt; sum + item.price, 0);
}

// Classes and interfaces: PascalCase
class UserProfile { }
interface UserData { }

// Constants: UPPER_SNAKE_CASE or camelCase
const MAX_CONNECTIONS = 100;
const defaultTimeout = 5000;
```

### Java

```java
// Variables and methods: camelCase
String userName = &quot;Charlie&quot;;
public int calculateTotalPrice(List&lt;Item&gt; items) { }

// Classes and interfaces: PascalCase
public class UserProfile { }
public interface Serializable { }

// Constants: UPPER_SNAKE_CASE
public static final int MAX_CONNECTIONS = 100;

// Packages: lowercase
package com.example.project;
```

## Naming Anti-Patterns

### Avoid

```javascript
// Single letter names (except loop counters)
let a = getUserData();

// Meaningless names
let data, info, thing, stuff;

// Hungarian notation in modern languages
let strName, intAge, bIsActive;

// Encoded type information
let userMap, nameString, countInteger;

// Overly abbreviated
let usrNm, calcTtl, procData;

// Mental mapping required
let temp, foo, bar, baz;
```

## Good Examples

```python
# Clear, self-documenting code
def send_welcome_email_to_new_users(users):
    for user in users:
        if user.is_new and not user.welcome_email_sent:
            email_service.send(
                recipient=user.email,
                template=&#x27;welcome&#x27;,
                context={&#x27;name&#x27;: user.full_name}
            )
            user.mark_welcome_email_sent()
```

```typescript
class OrderProcessor {
  private readonly maxRetries = 3;
  private readonly retryDelayMs = 1000;
  
  async processOrder(order: Order): Promise&lt;ProcessedOrder&gt; {
    const validatedOrder = this.validateOrder(order);
    const paymentResult = await this.processPayment(validatedOrder);
    
    if (paymentResult.isSuccessful) {
      return this.createProcessedOrder(validatedOrder, paymentResult);
    }
    
    throw new PaymentFailedError(paymentResult.errorMessage);
  }
}
```

Remember: Good names make code self-documenting and reduce the need for comments!
</p></div></div></div><div class="p-3 border rounded-md mb-2 transition-colors border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 bg-white dark:bg-gray-800"><div class="flex items-start gap-3"><div class="pt-1"><input type="checkbox" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:bg-gray-700 dark:border-gray-600 cursor-pointer"/></div><div class="flex-1 min-w-0"><div class="flex items-center justify-between mb-1"><h3 class="text-sm font-bold text-gray-900 dark:text-white truncate pr-2" title="Error Handling">Error Handling</h3><a href="https://github.com/jjgroenendijk/prompts/edit/main/snippets/coding-style/error-handling.md" target="_blank" rel="noopener noreferrer" class="text-xs text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 shrink-0 underline decoration-dotted hover:decoration-solid">Edit</a></div><p class="text-xs text-gray-600 dark:text-gray-300 line-clamp-3 break-words opacity-80"># Error Handling Patterns

Robust error handling is crucial for building reliable applications. Handle errors gracefully and provide meaningful feedback.

## Core Principles

1. **Fail fast** - Detect errors early
2. **Be specific** - Use specific exception types
3. **Don&#x27;t swallow errors** - Always handle or propagate
4. **Clean up resources** - Use try-finally or context managers
5. **Log appropriately** - Record errors for debugging

## Try-Catch Best Practices

### JavaScript/TypeScript

```typescript
// Good: Specific error handling
async function fetchUserData(userId: string): Promise&lt;User&gt; {
  try {
    const response = await fetch(`/api/users/${userId}`);
    
    if (!response.ok) {
      throw new Error(`HTTP ${response.status}: ${response.statusText}`);
    }
    
    const data = await response.json();
    return data;
  } catch (error) {
    if (error instanceof TypeError) {
      // Network error
      logger.error(&#x27;Network error fetching user&#x27;, { userId, error });
      throw new NetworkError(&#x27;Unable to reach server&#x27;);
    } else if (error instanceof SyntaxError) {
      // JSON parsing error
      logger.error(&#x27;Invalid response format&#x27;, { userId, error });
      throw new DataFormatError(&#x27;Server returned invalid data&#x27;);
    } else {
      // Re-throw unknown errors
      logger.error(&#x27;Unexpected error&#x27;, { userId, error });
      throw error;
    }
  }
}
```

### Python

```python
# Good: Multiple exception types
def read_config_file(filepath):
    try:
        with open(filepath, &#x27;r&#x27;) as f:
            config = json.load(f)
        return config
    except FileNotFoundError:
        logger.error(f&quot;Config file not found: {filepath}&quot;)
        return get_default_config()
    except json.JSONDecodeError as e:
        logger.error(f&quot;Invalid JSON in config: {e}&quot;)
        raise ConfigurationError(f&quot;Malformed config file: {filepath}&quot;)
    except PermissionError:
        logger.error(f&quot;Permission denied reading: {filepath}&quot;)
        raise ConfigurationError(f&quot;Cannot read config file: {filepath}&quot;)
    except Exception as e:
        logger.error(f&quot;Unexpected error reading config: {e}&quot;)
        raise
```

## Custom Exception Classes

### Python

```python
class ApplicationError(Exception):
    &quot;&quot;&quot;Base exception for application errors.&quot;&quot;&quot;
    def __init__(self, message, code=None, details=None):
        super().__init__(message)
        self.code = code
        self.details = details or {}

class ValidationError(ApplicationError):
    &quot;&quot;&quot;Raised when input validation fails.&quot;&quot;&quot;
    def __init__(self, message, field=None):
        super().__init__(message, code=&#x27;VALIDATION_ERROR&#x27;)
        self.field = field

class ResourceNotFoundError(ApplicationError):
    &quot;&quot;&quot;Raised when a requested resource doesn&#x27;t exist.&quot;&quot;&quot;
    def __init__(self, resource_type, resource_id):
        message = f&quot;{resource_type} with id {resource_id} not found&quot;
        super().__init__(message, code=&#x27;NOT_FOUND&#x27;)
        self.resource_type = resource_type
        self.resource_id = resource_id

class AuthenticationError(ApplicationError):
    &quot;&quot;&quot;Raised when authentication fails.&quot;&quot;&quot;
    def __init__(self, message=&quot;Authentication failed&quot;):
        super().__init__(message, code=&#x27;AUTH_ERROR&#x27;)

# Usage
def get_user(user_id):
    user = db.query(User).get(user_id)
    if not user:
        raise ResourceNotFoundError(&#x27;User&#x27;, user_id)
    return user
```

### TypeScript

```typescript
class ApplicationError extends Error {
  constructor(
    message: string,
    public code: string,
    public statusCode: number = 500,
    public details?: Record&lt;string, any&gt;
  ) {
    super(message);
    this.name = this.constructor.name;
    Error.captureStackTrace(this, this.constructor);
  }
}

class ValidationError extends ApplicationError {
  constructor(message: string, public field?: string) {
    super(message, &#x27;VALIDATION_ERROR&#x27;, 400, { field });
  }
}

class ResourceNotFoundError extends ApplicationError {
  constructor(resourceType: string, resourceId: string) {
    super(
      `${resourceType} with id ${resourceId} not found`,
      &#x27;NOT_FOUND&#x27;,
      404,
      { resourceType, resourceId }
    );
  }
}

class UnauthorizedError extends ApplicationError {
  constructor(message = &#x27;Unauthorized&#x27;) {
    super(message, &#x27;UNAUTHORIZED&#x27;, 401);
  }
}

// Usage
function getUser(userId: string): User {
  const user = database.users.find(u =&gt; u.id === userId);
  if (!user) {
    throw new ResourceNotFoundError(&#x27;User&#x27;, userId);
  }
  return user;
}
```

## Error Handling in Async Code

### Promises

```javascript
// Good: Proper promise error handling
function processUserData(userId) {
  return fetchUser(userId)
    .then(user =&gt; validateUser(user))
    .then(validUser =&gt; enrichUserData(validUser))
    .then(enrichedUser =&gt; saveUser(enrichedUser))
    .catch(ValidationError, error =&gt; {
      logger.warn(&#x27;Validation failed&#x27;, { userId, error });
      return getDefaultUser(userId);
    })
    .catch(NetworkError, error =&gt; {
      logger.error(&#x27;Network error&#x27;, { userId, error });
      throw new ServiceUnavailableError(&#x27;User service unavailable&#x27;);
    })
    .catch(error =&gt; {
      logger.error(&#x27;Unexpected error processing user&#x27;, { userId, error });
      throw error;
    });
}
```

### Async/Await

```typescript
// Good: Clean async/await error handling
async function createOrder(orderData: OrderData): Promise&lt;Order&gt; {
  let transaction;
  
  try {
    transaction = await db.beginTransaction();
    
    // Validate order
    const validation = validateOrderData(orderData);
    if (!validation.isValid) {
      throw new ValidationError(validation.errors);
    }
    
    // Check inventory
    const inventoryCheck = await checkInventory(orderData.items);
    if (!inventoryCheck.available) {
      throw new InsufficientInventoryError(inventoryCheck.missing);
    }
    
    // Create order
    const order = await db.orders.create(orderData, { transaction });
    
    // Process payment
    const payment = await processPayment(order.total, orderData.paymentMethod);
    if (!payment.success) {
      throw new PaymentFailedError(payment.reason);
    }
    
    // Update inventory
    await updateInventory(orderData.items, { transaction });
    
    await transaction.commit();
    
    logger.info(&#x27;Order created successfully&#x27;, { orderId: order.id });
    return order;
    
  } catch (error) {
    if (transaction) {
      await transaction.rollback();
    }
    
    if (error instanceof ValidationError) {
      logger.warn(&#x27;Order validation failed&#x27;, { error });
      throw error;
    } else if (error instanceof PaymentFailedError) {
      logger.error(&#x27;Payment processing failed&#x27;, { error });
      throw error;
    } else {
      logger.error(&#x27;Unexpected error creating order&#x27;, { error });
      throw new OrderCreationError(&#x27;Failed to create order&#x27;, error);
    }
  }
}
```

## Resource Cleanup

### Python Context Managers

```python
from contextlib import contextmanager

@contextmanager
def database_connection(connection_string):
    &quot;&quot;&quot;Ensure database connection is properly closed.&quot;&quot;&quot;
    conn = None
    try:
        conn = create_connection(connection_string)
        yield conn
    except DatabaseError as e:
        logger.error(f&quot;Database error: {e}&quot;)
        if conn:
            conn.rollback()
        raise
    finally:
        if conn:
            conn.close()
            logger.debug(&quot;Database connection closed&quot;)

# Usage
with database_connection(DB_URL) as conn:
    cursor = conn.cursor()
    cursor.execute(&quot;SELECT * FROM users&quot;)
    results = cursor.fetchall()
```

### Try-Finally

```java
public void processFile(String filepath) throws IOException {
    BufferedReader reader = null;
    try {
        reader = new BufferedReader(new FileReader(filepath));
        String line;
        while ((line = reader.readLine()) != null) {
            processLine(line);
        }
    } catch (FileNotFoundException e) {
        logger.error(&quot;File not found: &quot; + filepath, e);
        throw new ProcessingException(&quot;Cannot process file&quot;, e);
    } catch (IOException e) {
        logger.error(&quot;Error reading file: &quot; + filepath, e);
        throw new ProcessingException(&quot;Error processing file&quot;, e);
    } finally {
        if (reader != null) {
            try {
                reader.close();
            } catch (IOException e) {
                logger.warn(&quot;Error closing reader&quot;, e);
            }
        }
    }
}

// Better: Try-with-resources (Java 7+)
public void processFile(String filepath) throws ProcessingException {
    try (BufferedReader reader = new BufferedReader(new FileReader(filepath))) {
        String line;
        while ((line = reader.readLine()) != null) {
            processLine(line);
        }
    } catch (FileNotFoundException e) {
        logger.error(&quot;File not found: &quot; + filepath, e);
        throw new ProcessingException(&quot;Cannot process file&quot;, e);
    } catch (IOException e) {
        logger.error(&quot;Error reading file: &quot; + filepath, e);
        throw new ProcessingException(&quot;Error processing file&quot;, e);
    }
}
```

## Error Responses in APIs

```typescript
// Express.js error handler middleware
interface ErrorResponse {
  error: {
    code: string;
    message: string;
    details?: any;
  };
  requestId?: string;
}

function errorHandler(
  err: Error,
  req: Request,
  res: Response,
  next: NextFunction
): void {
  const requestId = req.headers[&#x27;x-request-id&#x27;] as string;
  
  logger.error(&#x27;API error&#x27;, {
    error: err,
    requestId,
    method: req.method,
    path: req.path,
    ip: req.ip
  });
  
  if (err instanceof ValidationError) {
    const response: ErrorResponse = {
      error: {
        code: err.code,
        message: err.message,
        details: err.details
      },
      requestId
    };
    return res.status(400).json(response);
  }
  
  if (err instanceof UnauthorizedError) {
    const response: ErrorResponse = {
      error: {
        code: &#x27;UNAUTHORIZED&#x27;,
        message: &#x27;Authentication required&#x27;
      },
      requestId
    };
    return res.status(401).json(response);
  }
  
  if (err instanceof ResourceNotFoundError) {
    const response: ErrorResponse = {
      error: {
        code: &#x27;NOT_FOUND&#x27;,
        message: err.message
      },
      requestId
    };
    return res.status(404).json(response);
  }
  
  // Default: Don&#x27;t leak internal errors
  const response: ErrorResponse = {
    error: {
      code: &#x27;INTERNAL_ERROR&#x27;,
      message: &#x27;An unexpected error occurred&#x27;
    },
    requestId
  };
  res.status(500).json(response);
}

app.use(errorHandler);
```

## Retry Logic

```python
import time
from functools import wraps

def retry(max_attempts=3, delay=1, backoff=2, exceptions=(Exception,)):
    &quot;&quot;&quot;Retry decorator with exponential backoff.&quot;&quot;&quot;
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            attempt = 0
            current_delay = delay
            
            while attempt &lt; max_attempts:
                try:
                    return func(*args, **kwargs)
                except exceptions as e:
                    attempt += 1
                    if attempt &gt;= max_attempts:
                        logger.error(f&quot;Failed after {max_attempts} attempts: {e}&quot;)
                        raise
                    
                    logger.warning(
                        f&quot;Attempt {attempt} failed, retrying in {current_delay}s: {e}&quot;
                    )
                    time.sleep(current_delay)
                    current_delay *= backoff
            
        return wrapper
    return decorator

# Usage
@retry(max_attempts=5, delay=1, backoff=2, exceptions=(NetworkError, TimeoutError))
def fetch_external_data(url):
    response = requests.get(url, timeout=10)
    response.raise_for_status()
    return response.json()
```

## Defensive Programming

```python
def calculate_average(numbers):
    &quot;&quot;&quot;Calculate average with defensive checks.&quot;&quot;&quot;
    # Input validation
    if numbers is None:
        raise ValueError(&quot;numbers cannot be None&quot;)
    
    if not isinstance(numbers, (list, tuple)):
        raise TypeError(f&quot;Expected list or tuple, got {type(numbers)}&quot;)
    
    if len(numbers) == 0:
        raise ValueError(&quot;Cannot calculate average of empty list&quot;)
    
    # Check all elements are numeric
    if not all(isinstance(n, (int, float)) for n in numbers):
        raise TypeError(&quot;All elements must be numeric&quot;)
    
    # Perform calculation
    total = sum(numbers)
    count = len(numbers)
    
    return total / count
```

## Logging Best Practices

```typescript
// Structured logging with context
import winston from &#x27;winston&#x27;;

const logger = winston.createLogger({
  level: &#x27;info&#x27;,
  format: winston.format.json(),
  transports: [
    new winston.transports.File({ filename: &#x27;error.log&#x27;, level: &#x27;error&#x27; }),
    new winston.transports.File({ filename: &#x27;combined.log&#x27; })
  ]
});

function processPayment(orderId: string, amount: number) {
  const context = { orderId, amount };
  
  try {
    logger.info(&#x27;Processing payment&#x27;, context);
    
    const result = paymentGateway.charge(amount);
    
    logger.info(&#x27;Payment processed successfully&#x27;, {
      ...context,
      transactionId: result.transactionId
    });
    
    return result;
  } catch (error) {
    logger.error(&#x27;Payment processing failed&#x27;, {
      ...context,
      error: error.message,
      stack: error.stack
    });
    
    throw new PaymentError(&#x27;Payment processing failed&#x27;, error);
  }
}
```

Remember: Good error handling makes your application resilient and maintainable!
</p></div></div></div></div></div><div class="border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden shadow-sm"><div class="bg-gray-100 dark:bg-gray-800 p-3 flex items-center justify-between select-none sticky top-0 z-0"><div class="flex items-center gap-3"><input type="checkbox" class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500 dark:bg-gray-700 cursor-pointer"/><button class="flex items-center gap-2 text-sm font-bold text-gray-800 dark:text-gray-100 capitalize focus:outline-none hover:text-blue-600 dark:hover:text-blue-400 transition-colors">prompts<span class="text-xs font-medium text-gray-500 dark:text-gray-400 px-2 py-0.5 bg-white dark:bg-gray-700 rounded-full border border-gray-200 dark:border-gray-600">2</span></button></div><button class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg></button></div><div class="p-2 bg-white dark:bg-gray-900 space-y-2"><div class="p-3 border rounded-md mb-2 transition-colors border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 bg-white dark:bg-gray-800"><div class="flex items-start gap-3"><div class="pt-1"><input type="checkbox" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:bg-gray-700 dark:border-gray-600 cursor-pointer"/></div><div class="flex-1 min-w-0"><div class="flex items-center justify-between mb-1"><h3 class="text-sm font-bold text-gray-900 dark:text-white truncate pr-2" title="Debugging">Debugging</h3><a href="https://github.com/jjgroenendijk/prompts/edit/main/snippets/prompts/debugging.md" target="_blank" rel="noopener noreferrer" class="text-xs text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 shrink-0 underline decoration-dotted hover:decoration-solid">Edit</a></div><p class="text-xs text-gray-600 dark:text-gray-300 line-clamp-3 break-words opacity-80"># Debugging Strategies

Effective debugging is a critical skill. Use systematic approaches to identify and fix issues quickly.

## The Debugging Mindset

1. **Stay calm** - Frustration clouds judgment
2. **Be systematic** - Follow a methodical process
3. **Question assumptions** - The bug is often where you least expect
4. **Reproduce first** - Understand how to trigger the issue
5. **Isolate the problem** - Narrow down the scope

## Initial Steps

### 1. Reproduce the Bug

- [ ] Can you consistently trigger the bug?
- [ ] What are the exact steps to reproduce?
- [ ] Does it happen in all environments?
- [ ] What&#x27;s the expected vs. actual behavior?

### 2. Gather Information

```python
# Add detailed logging
import logging

logging.basicConfig(level=logging.DEBUG)
logger = logging.getLogger(__name__)

def process_order(order):
    logger.debug(f&quot;Processing order: {order.id}&quot;)
    logger.debug(f&quot;Order data: {order.to_dict()}&quot;)
    
    try:
        result = validate_order(order)
        logger.debug(f&quot;Validation result: {result}&quot;)
    except Exception as e:
        logger.error(f&quot;Validation failed: {e}&quot;, exc_info=True)
        raise
```

### 3. Read Error Messages Carefully

```
Traceback (most recent call last):
  File &quot;main.py&quot;, line 42, in process_data
    result = transform(data[&#x27;values&#x27;])
KeyError: &#x27;values&#x27;
```

What this tells you:
- Error type: `KeyError`
- Missing key: `&#x27;values&#x27;`
- Location: `main.py` line 42
- Function: `process_data`

## Debugging Techniques

### Print/Log Debugging

```javascript
function calculateDiscount(price, percentage) {
  console.log(&#x27;calculateDiscount called:&#x27;, { price, percentage });
  
  const discount = price * (percentage / 100);
  console.log(&#x27;Calculated discount:&#x27;, discount);
  
  const finalPrice = price - discount;
  console.log(&#x27;Final price:&#x27;, finalPrice);
  
  return finalPrice;
}
```

### Binary Search / Divide and Conquer

Comment out half the code to isolate the problem:

```python
def complex_function(data):
    # Part 1
    step1 = transform_data(data)
    step2 = validate_data(step1)
    step3 = enrich_data(step2)
    
    # Part 2 - Comment this out first
    # step4 = process_data(step3)
    # step5 = finalize_data(step4)
    # return step5
    
    return step3  # Return early to test Part 1
```

### Rubber Duck Debugging

Explain your code line-by-line to someone (or something):

1. What does this line do?
2. What values do I expect here?
3. What assumptions am I making?
4. Could this fail?

### Add Assertions

```typescript
function getUserById(id: string): User {
  console.assert(typeof id === &#x27;string&#x27;, &#x27;id must be a string&#x27;);
  console.assert(id.length &gt; 0, &#x27;id cannot be empty&#x27;);
  
  const user = database.users.find(u =&gt; u.id === id);
  
  console.assert(user !== undefined, `User ${id} not found`);
  
  return user;
}
```

## Debugger Usage

### JavaScript/Node.js

```javascript
function processData(items) {
  debugger; // Execution will pause here
  
  for (let item of items) {
    if (item.price &gt; 100) {
      debugger; // Conditional breakpoint location
      applyDiscount(item);
    }
  }
}

// Run with: node inspect script.js
// Or use Chrome DevTools
```

### Python (pdb)

```python
import pdb

def calculate_total(items):
    total = 0
    for item in items:
        pdb.set_trace()  # Debugger starts here
        total += item[&#x27;price&#x27;] * item[&#x27;quantity&#x27;]
    return total

# Commands:
# n - next line
# s - step into
# c - continue
# p variable - print variable
# l - list code
# q - quit
```

### Browser DevTools

```javascript
// Conditional breakpoint
function processUser(user) {
  // Right-click breakpoint, add condition: user.age &lt; 18
  if (user.isActive) {
    sendNotification(user);
  }
}

// Log points (no code changes needed)
// Right-click line number &gt; Add logpoint
// Enter: &#x27;User:&#x27;, user, &#x27;Status:&#x27;, user.status
```

## Common Bug Patterns

### Off-by-One Errors

```python
# Bug: Misses last element
for i in range(len(items) - 1):
    process(items[i])

# Fix: Include all elements
for i in range(len(items)):
    process(items[i])

# Better: Use iteration
for item in items:
    process(item)
```

### Null/Undefined Issues

```javascript
// Bug: Potential null reference
function getUsername(user) {
  return user.profile.name; // Crashes if profile is null
}

// Fix: Defensive checks
function getUsername(user) {
  if (!user || !user.profile) {
    return &#x27;Unknown&#x27;;
  }
  return user.profile.name;
}

// Modern: Optional chaining
function getUsername(user) {
  return user?.profile?.name ?? &#x27;Unknown&#x27;;
}
```

### Type Mismatches

```python
# Bug: String concatenation instead of addition
def calculate_total(a, b):
    return a + b

result = calculate_total(&#x27;10&#x27;, &#x27;20&#x27;)  # Returns &#x27;1020&#x27; not 30

# Fix: Type validation
def calculate_total(a, b):
    if not isinstance(a, (int, float)) or not isinstance(b, (int, float)):
        raise TypeError(&#x27;Arguments must be numeric&#x27;)
    return a + b
```

### Race Conditions

```javascript
// Bug: Race condition
let counter = 0;

async function increment() {
  const current = counter;
  await delay(100);
  counter = current + 1;
}

// Fix: Atomic operations or locking
let counter = 0;
const lock = new AsyncLock();

async function increment() {
  await lock.acquire(&#x27;counter&#x27;, async () =&gt; {
    counter += 1;
  });
}
```

### Memory Leaks

```javascript
// Bug: Event listener leak
function setupComponent() {
  const button = document.getElementById(&#x27;myButton&#x27;);
  button.addEventListener(&#x27;click&#x27;, handleClick);
  // Component gets recreated but listeners accumulate
}

// Fix: Clean up listeners
function setupComponent() {
  const button = document.getElementById(&#x27;myButton&#x27;);
  button.removeEventListener(&#x27;click&#x27;, handleClick);
  button.addEventListener(&#x27;click&#x27;, handleClick);
}

function cleanup() {
  const button = document.getElementById(&#x27;myButton&#x27;);
  button.removeEventListener(&#x27;click&#x27;, handleClick);
}
```

## Advanced Techniques

### Time-Travel Debugging

Use tools like:
- Redux DevTools (JavaScript)
- rr (C/C++)
- Replay.io (JavaScript)

### Performance Debugging

```javascript
// Measure execution time
console.time(&#x27;processData&#x27;);
processData(largeDataset);
console.timeEnd(&#x27;processData&#x27;);

// Profile specific sections
performance.mark(&#x27;start-processing&#x27;);
processData(data);
performance.mark(&#x27;end-processing&#x27;);
performance.measure(&#x27;processing&#x27;, &#x27;start-processing&#x27;, &#x27;end-processing&#x27;);

// Get measurements
const measures = performance.getEntriesByType(&#x27;measure&#x27;);
console.log(measures[0].duration);
```

### Network Debugging

```python
# Debug HTTP requests
import requests
import logging

# Enable debug logging
logging.basicConfig(level=logging.DEBUG)

response = requests.get(&#x27;https://api.example.com/data&#x27;)
print(f&quot;Status: {response.status_code}&quot;)
print(f&quot;Headers: {response.headers}&quot;)
print(f&quot;Body: {response.text}&quot;)
```

### Database Query Debugging

```python
# SQLAlchemy query debugging
import logging
logging.getLogger(&#x27;sqlalchemy.engine&#x27;).setLevel(logging.INFO)

# Django query debugging
from django.db import connection
print(connection.queries)

# Count queries
from django.db import reset_queries
reset_queries()
# ... run code ...
print(f&quot;Queries executed: {len(connection.queries)}&quot;)
```

## Debugging Checklist

### When Stuck

- [ ] Take a break - fresh eyes help
- [ ] Read error message completely
- [ ] Check recent changes (git diff)
- [ ] Verify assumptions with print/log statements
- [ ] Search error message online
- [ ] Check documentation
- [ ] Review similar working code
- [ ] Ask for help (rubber duck first!)

### Questions to Ask

1. **What changed?** - Was it working before?
2. **What&#x27;s different?** - Different environment, data, user?
3. **What am I assuming?** - Are my assumptions correct?
4. **Can I simplify?** - Minimal reproduction case?
5. **What does the data look like?** - Inspect actual values

## Tools and Resources

### JavaScript/TypeScript
- Chrome DevTools
- VS Code Debugger
- Node.js inspect
- React DevTools
- Redux DevTools

### Python
- pdb (built-in debugger)
- ipdb (enhanced pdb)
- VS Code Debugger
- PyCharm Debugger
- Python Tutor (visualizer)

### General
- Git bisect (find breaking commit)
- Wireshark (network analysis)
- Postman (API testing)
- Browser network tab
- System monitors (htop, Activity Monitor)

## Documentation

When you fix a bug:

```python
def calculate_discount(price, quantity):
    &quot;&quot;&quot;
    Calculate discount based on quantity.
    
    Bug fix: Previously returned negative discount for quantity=0.
    Now returns 0 discount for quantity &lt;= 1.
    
    See issue #123 for details.
    &quot;&quot;&quot;
    if quantity &lt;= 1:
        return 0
    return price * 0.1 * (quantity - 1)
```

## Prevention

After fixing:

1. **Add a test** - Prevent regression
2. **Document the fix** - Help future developers
3. **Look for similar bugs** - Same pattern elsewhere?
4. **Refactor if needed** - Make it harder to break
5. **Share learnings** - Help the team

Remember: Every bug is an opportunity to learn and improve your code!
</p></div></div></div><div class="p-3 border rounded-md mb-2 transition-colors border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 bg-white dark:bg-gray-800"><div class="flex items-start gap-3"><div class="pt-1"><input type="checkbox" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:bg-gray-700 dark:border-gray-600 cursor-pointer"/></div><div class="flex-1 min-w-0"><div class="flex items-center justify-between mb-1"><h3 class="text-sm font-bold text-gray-900 dark:text-white truncate pr-2" title="Code Review">Code Review</h3><a href="https://github.com/jjgroenendijk/prompts/edit/main/snippets/prompts/code-review.md" target="_blank" rel="noopener noreferrer" class="text-xs text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 shrink-0 underline decoration-dotted hover:decoration-solid">Edit</a></div><p class="text-xs text-gray-600 dark:text-gray-300 line-clamp-3 break-words opacity-80"># Code Review Checklist

A comprehensive checklist for conducting thorough and effective code reviews.

## General

- [ ] Code serves a clear purpose and solves the intended problem
- [ ] Changes align with project requirements and specifications
- [ ] No unnecessary or unused code
- [ ] No commented-out code blocks
- [ ] No debug statements or console logs left in production code

## Code Quality

- [ ] Code is readable and easy to understand
- [ ] Functions are small and focused (single responsibility)
- [ ] Code follows DRY principle (Don&#x27;t Repeat Yourself)
- [ ] Complex logic is broken down into smaller functions
- [ ] Magic numbers replaced with named constants
- [ ] No overly clever or obscure code

## Naming

- [ ] Variables have clear, descriptive names
- [ ] Functions have verb-based names that describe actions
- [ ] Classes use noun-based names
- [ ] Boolean variables use is/has/can/should prefixes
- [ ] Names follow project conventions (camelCase, snake_case, etc.)
- [ ] No single-letter variables except loop counters

## Error Handling

- [ ] All error cases are handled appropriately
- [ ] Errors include helpful messages
- [ ] Resources are cleaned up in finally blocks
- [ ] No empty catch blocks
- [ ] Errors are logged with sufficient context
- [ ] User-facing error messages are clear and actionable

## Security

- [ ] No hardcoded credentials or secrets
- [ ] User input is validated and sanitized
- [ ] SQL queries use parameterized statements
- [ ] Authentication and authorization are properly implemented
- [ ] Sensitive data is encrypted
- [ ] HTTPS is used for all external requests
- [ ] CSRF protection is in place
- [ ] Rate limiting is implemented where needed

## Performance

- [ ] No unnecessary database queries
- [ ] Queries are optimized and use proper indexes
- [ ] No N+1 query problems
- [ ] Large datasets are paginated
- [ ] Expensive operations are cached when appropriate
- [ ] No infinite loops or recursion without base case
- [ ] Appropriate data structures are used

## Testing

- [ ] New code has adequate test coverage
- [ ] Tests are clear and well-named
- [ ] Edge cases are tested
- [ ] Tests are independent and can run in any order
- [ ] Mocks and stubs are used appropriately
- [ ] All tests pass
- [ ] Integration tests cover critical paths

## Documentation

- [ ] Public APIs have clear documentation
- [ ] Complex algorithms are explained
- [ ] Non-obvious decisions are justified with comments
- [ ] README is updated if needed
- [ ] API documentation is updated
- [ ] Breaking changes are clearly documented

## Database

- [ ] Migrations are reversible
- [ ] Indexes are added for frequently queried columns
- [ ] Foreign key constraints are properly defined
- [ ] No N+1 queries
- [ ] Transactions are used for multi-step operations
- [ ] Database connections are properly closed

## API Design

- [ ] RESTful conventions are followed
- [ ] Endpoints use appropriate HTTP methods
- [ ] Status codes are correct and meaningful
- [ ] Request/response schemas are validated
- [ ] API versioning is considered
- [ ] Pagination is implemented for lists
- [ ] Rate limiting is in place

## Dependencies

- [ ] No unnecessary dependencies added
- [ ] Dependencies are at stable versions
- [ ] License compatibility is verified
- [ ] Dependencies are actively maintained
- [ ] Security vulnerabilities are checked

## Git Practices

- [ ] Commit messages are clear and descriptive
- [ ] Commits are atomic and focused
- [ ] No large files committed
- [ ] No sensitive data in commit history
- [ ] Branch naming follows conventions

## Code Style

- [ ] Code follows project style guide
- [ ] Indentation is consistent
- [ ] Line length is within limits
- [ ] Linter passes without warnings
- [ ] Formatting is consistent

## Specific Language Checks

### JavaScript/TypeScript

- [ ] === used instead of ==
- [ ] Promises are properly handled
- [ ] async/await used correctly
- [ ] TypeScript types are properly defined
- [ ] No &#x27;any&#x27; types unless justified
- [ ] Null/undefined checks are in place

### Python

- [ ] Follows PEP 8 style guide
- [ ] Type hints are used
- [ ] Context managers used for resources
- [ ] List comprehensions used appropriately
- [ ] F-strings used for formatting

### Java

- [ ] Proper exception handling
- [ ] Resources closed in finally or try-with-resources
- [ ] Proper use of access modifiers
- [ ] Immutability used where appropriate
- [ ] Generics used correctly

## Review Process

### Before Reviewing

1. Understand the context and requirements
2. Check the ticket/issue description
3. Review the overall approach before details

### During Review

1. Start with architecture and design
2. Check for security issues
3. Look for performance problems
4. Verify error handling
5. Check test coverage
6. Review code style last

### Providing Feedback

- [ ] Comments are constructive and specific
- [ ] Suggestions include reasoning
- [ ] Praise good solutions
- [ ] Distinguish between required and optional changes
- [ ] Ask questions instead of making demands
- [ ] Provide code examples for complex suggestions

## Common Issues to Watch For

### Logic Errors

```javascript
// Bad: Off-by-one error
for (let i = 0; i &lt;= array.length; i++) {
  console.log(array[i]); // Will error on last iteration
}

// Good
for (let i = 0; i &lt; array.length; i++) {
  console.log(array[i]);
}
```

### Resource Leaks

```python
# Bad: File not closed on error
file = open(&#x27;data.txt&#x27;, &#x27;r&#x27;)
data = process(file.read())
file.close()

# Good: Context manager ensures cleanup
with open(&#x27;data.txt&#x27;, &#x27;r&#x27;) as file:
    data = process(file.read())
```

### Race Conditions

```javascript
// Bad: Race condition
if (!cache.has(key)) {
  cache.set(key, await fetchData(key));
}

// Good: Atomic operation
if (!cache.has(key)) {
  const data = await fetchData(key);
  if (!cache.has(key)) {  // Double-check
    cache.set(key, data);
  }
}
```

### SQL Injection

```python
# Bad: SQL injection vulnerability
query = f&quot;SELECT * FROM users WHERE username = &#x27;{username}&#x27;&quot;

# Good: Parameterized query
query = &quot;SELECT * FROM users WHERE username = ?&quot;
cursor.execute(query, (username,))
```

## Review Etiquette

### Do

- Be respectful and professional
- Focus on the code, not the person
- Explain why something should change
- Ask questions to understand intent
- Acknowledge good work
- Be timely with reviews

### Don&#x27;t

- Be condescending or dismissive
- Make personal attacks
- Nitpick trivial style issues
- Block on personal preferences
- Rewrite entire implementations in comments
- Let reviews sit for days

## Final Checklist

Before approving:

- [ ] All comments addressed or discussed
- [ ] Tests pass in CI/CD
- [ ] No merge conflicts
- [ ] Documentation updated
- [ ] Ready for production deployment

Remember: Code reviews are about collaboration and learning, not gatekeeping!
</p></div></div></div></div></div><div class="border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden shadow-sm"><div class="bg-gray-100 dark:bg-gray-800 p-3 flex items-center justify-between select-none sticky top-0 z-0"><div class="flex items-center gap-3"><input type="checkbox" class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500 dark:bg-gray-700 cursor-pointer"/><button class="flex items-center gap-2 text-sm font-bold text-gray-800 dark:text-gray-100 capitalize focus:outline-none hover:text-blue-600 dark:hover:text-blue-400 transition-colors">security<span class="text-xs font-medium text-gray-500 dark:text-gray-400 px-2 py-0.5 bg-white dark:bg-gray-700 rounded-full border border-gray-200 dark:border-gray-600">2</span></button></div><button class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg></button></div><div class="p-2 bg-white dark:bg-gray-900 space-y-2"><div class="p-3 border rounded-md mb-2 transition-colors border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 bg-white dark:bg-gray-800"><div class="flex items-start gap-3"><div class="pt-1"><input type="checkbox" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:bg-gray-700 dark:border-gray-600 cursor-pointer"/></div><div class="flex-1 min-w-0"><div class="flex items-center justify-between mb-1"><h3 class="text-sm font-bold text-gray-900 dark:text-white truncate pr-2" title="Input Validation">Input Validation</h3><a href="https://github.com/jjgroenendijk/prompts/edit/main/snippets/security/input-validation.md" target="_blank" rel="noopener noreferrer" class="text-xs text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 shrink-0 underline decoration-dotted hover:decoration-solid">Edit</a></div><p class="text-xs text-gray-600 dark:text-gray-300 line-clamp-3 break-words opacity-80"># Input Validation Best Practices

Input validation is the first line of defense against security vulnerabilities. Always validate, sanitize, and verify user input before processing.

## Core Principles

1. **Never trust user input** - Assume all external data is malicious
2. **Validate on the server** - Client-side validation is for UX only
3. **Use allowlists over denylists** - Define what is acceptable
4. **Fail securely** - Reject invalid input by default

## Common Validation Patterns

### Email Validation

```javascript
function validateEmail(email) {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  
  if (!email || typeof email !== &#x27;string&#x27;) {
    throw new Error(&#x27;Email is required and must be a string&#x27;);
  }
  
  if (email.length &gt; 254) {
    throw new Error(&#x27;Email exceeds maximum length&#x27;);
  }
  
  if (!emailRegex.test(email)) {
    throw new Error(&#x27;Invalid email format&#x27;);
  }
  
  return email.toLowerCase().trim();
}
```

### Numeric Input Validation

```python
def validate_age(age):
    &quot;&quot;&quot;Validate age input with range checking.&quot;&quot;&quot;
    try:
        age_int = int(age)
    except (ValueError, TypeError):
        raise ValueError(&quot;Age must be a valid integer&quot;)
    
    if age_int &lt; 0 or age_int &gt; 150:
        raise ValueError(&quot;Age must be between 0 and 150&quot;)
    
    return age_int
```

### String Sanitization

```java
public class InputValidator {
    private static final Pattern ALPHANUMERIC = Pattern.compile(&quot;^[a-zA-Z0-9_-]+$&quot;);
    
    public static String sanitizeUsername(String username) {
        if (username == null || username.isEmpty()) {
            throw new IllegalArgumentException(&quot;Username cannot be empty&quot;);
        }
        
        String trimmed = username.trim();
        
        if (trimmed.length() &lt; 3 || trimmed.length() &gt; 20) {
            throw new IllegalArgumentException(&quot;Username must be 3-20 characters&quot;);
        }
        
        if (!ALPHANUMERIC.matcher(trimmed).matches()) {
            throw new IllegalArgumentException(&quot;Username contains invalid characters&quot;);
        }
        
        return trimmed;
    }
}
```

## SQL Injection Prevention

**ALWAYS use parameterized queries:**

```sql
-- DANGEROUS - vulnerable to SQL injection
SELECT * FROM users WHERE username = &#x27;&quot; + userInput + &quot;&#x27;

-- SAFE - parameterized query
SELECT * FROM users WHERE username = ?
```

```python
# DANGEROUS
cursor.execute(f&quot;SELECT * FROM users WHERE id = {user_id}&quot;)

# SAFE
cursor.execute(&quot;SELECT * FROM users WHERE id = ?&quot;, (user_id,))
```

## XSS Prevention

Escape output based on context:

```javascript
// HTML context
function escapeHtml(unsafe) {
  return unsafe
    .replace(/&amp;/g, &quot;&amp;amp;&quot;)
    .replace(/&lt;/g, &quot;&amp;lt;&quot;)
    .replace(/&gt;/g, &quot;&amp;gt;&quot;)
    .replace(/&quot;/g, &quot;&amp;quot;&quot;)
    .replace(/&#x27;/g, &quot;&amp;#039;&quot;);
}

// JavaScript context
function escapeJs(unsafe) {
  return JSON.stringify(unsafe).slice(1, -1);
}

// URL context
function escapeUrl(unsafe) {
  return encodeURIComponent(unsafe);
}
```

## File Upload Validation

```python
ALLOWED_EXTENSIONS = {&#x27;png&#x27;, &#x27;jpg&#x27;, &#x27;jpeg&#x27;, &#x27;gif&#x27;, &#x27;pdf&#x27;}
MAX_FILE_SIZE = 5 * 1024 * 1024  # 5MB

def validate_file_upload(file):
    # Check file exists
    if not file or not file.filename:
        raise ValueError(&quot;No file provided&quot;)
    
    # Check extension
    ext = file.filename.rsplit(&#x27;.&#x27;, 1)[1].lower() if &#x27;.&#x27; in file.filename else &#x27;&#x27;
    if ext not in ALLOWED_EXTENSIONS:
        raise ValueError(f&quot;File type .{ext} not allowed&quot;)
    
    # Check file size
    file.seek(0, 2)  # Seek to end
    size = file.tell()
    file.seek(0)  # Reset
    
    if size &gt; MAX_FILE_SIZE:
        raise ValueError(&quot;File exceeds maximum size&quot;)
    
    # Verify MIME type matches extension
    import magic
    mime = magic.from_buffer(file.read(1024), mime=True)
    file.seek(0)
    
    allowed_mimes = {
        &#x27;png&#x27;: &#x27;image/png&#x27;,
        &#x27;jpg&#x27;: &#x27;image/jpeg&#x27;,
        &#x27;jpeg&#x27;: &#x27;image/jpeg&#x27;,
        &#x27;gif&#x27;: &#x27;image/gif&#x27;,
        &#x27;pdf&#x27;: &#x27;application/pdf&#x27;
    }
    
    if mime != allowed_mimes.get(ext):
        raise ValueError(&quot;File content doesn&#x27;t match extension&quot;)
    
    return True
```

## API Rate Limiting

Implement rate limiting to prevent abuse:

```javascript
const rateLimit = require(&#x27;express-rate-limit&#x27;);

const limiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 minutes
  max: 100, // Limit each IP to 100 requests per windowMs
  message: &#x27;Too many requests, please try again later&#x27;,
  standardHeaders: true,
  legacyHeaders: false,
});

app.use(&#x27;/api/&#x27;, limiter);
```

## Validation Checklist

- [ ] All user inputs are validated
- [ ] Validation happens server-side
- [ ] Length limits are enforced
- [ ] Type checking is performed
- [ ] Range checks for numeric values
- [ ] Format validation (regex patterns)
- [ ] Encoding/escaping for output
- [ ] File uploads are restricted and verified
- [ ] Rate limiting is implemented
- [ ] Error messages don&#x27;t leak sensitive info

## Common Mistakes to Avoid

1. **Trusting client-side validation alone**
2. **Using denylists instead of allowlists**
3. **Insufficient length checking**
4. **Revealing system details in error messages**
5. **Not validating data from trusted sources**
6. **Concatenating user input into queries**
7. **Forgetting to validate file uploads**
8. **Not implementing rate limiting**

## Testing Your Validation

Test with malicious inputs:

- SQL injection: `&#x27; OR &#x27;1&#x27;=&#x27;1`
- XSS: `&lt;script&gt;alert(&#x27;XSS&#x27;)&lt;/script&gt;`
- Path traversal: `../../etc/passwd`
- Command injection: `; rm -rf /`
- Null bytes: `file.txt\0.jpg`
- Extremely long strings
- Special characters: `!@#$%^&amp;*()`
- Unicode characters: `\u0000`, `\uFEFF`

Remember: Input validation is not optionalit&#x27;s a fundamental security requirement!
</p></div></div></div><div class="p-3 border rounded-md mb-2 transition-colors border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 bg-white dark:bg-gray-800"><div class="flex items-start gap-3"><div class="pt-1"><input type="checkbox" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:bg-gray-700 dark:border-gray-600 cursor-pointer"/></div><div class="flex-1 min-w-0"><div class="flex items-center justify-between mb-1"><h3 class="text-sm font-bold text-gray-900 dark:text-white truncate pr-2" title="Authentication">Authentication</h3><a href="https://github.com/jjgroenendijk/prompts/edit/main/snippets/security/authentication.md" target="_blank" rel="noopener noreferrer" class="text-xs text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 shrink-0 underline decoration-dotted hover:decoration-solid">Edit</a></div><p class="text-xs text-gray-600 dark:text-gray-300 line-clamp-3 break-words opacity-80"># Authentication Best Practices

Secure authentication is critical for protecting user accounts and sensitive data.

## Password Security

### Password Hashing

**NEVER store passwords in plain text.** Always use modern hashing algorithms:

```python
import bcrypt

# Hashing a password
def hash_password(password):
    salt = bcrypt.gensalt(rounds=12)
    return bcrypt.hashpw(password.encode(&#x27;utf-8&#x27;), salt)

# Verifying a password
def verify_password(password, hashed):
    return bcrypt.checkpw(password.encode(&#x27;utf-8&#x27;), hashed)
```

```javascript
const bcrypt = require(&#x27;bcrypt&#x27;);

async function hashPassword(password) {
  const saltRounds = 12;
  return await bcrypt.hash(password, saltRounds);
}

async function verifyPassword(password, hash) {
  return await bcrypt.compare(password, hash);
}
```

### Password Requirements

Enforce strong password policies:

```python
import re

def validate_password_strength(password):
    &quot;&quot;&quot;Validate password meets security requirements.&quot;&quot;&quot;
    errors = []
    
    if len(password) &lt; 12:
        errors.append(&quot;Password must be at least 12 characters&quot;)
    
    if len(password) &gt; 128:
        errors.append(&quot;Password must not exceed 128 characters&quot;)
    
    if not re.search(r&#x27;[a-z]&#x27;, password):
        errors.append(&quot;Password must contain lowercase letters&quot;)
    
    if not re.search(r&#x27;[A-Z]&#x27;, password):
        errors.append(&quot;Password must contain uppercase letters&quot;)
    
    if not re.search(r&#x27;\d&#x27;, password):
        errors.append(&quot;Password must contain numbers&quot;)
    
    if not re.search(r&#x27;[!@#$%^&amp;*(),.?&quot;:{}|&lt;&gt;]&#x27;, password):
        errors.append(&quot;Password must contain special characters&quot;)
    
    # Check against common passwords
    with open(&#x27;common_passwords.txt&#x27;) as f:
        if password.lower() in [line.strip().lower() for line in f]:
            errors.append(&quot;Password is too common&quot;)
    
    return errors
```

## Session Management

### Secure Session Configuration

```javascript
const session = require(&#x27;express-session&#x27;);

app.use(session({
  secret: process.env.SESSION_SECRET, // Strong, random secret
  name: &#x27;sessionId&#x27;, // Don&#x27;t use default name
  resave: false,
  saveUninitialized: false,
  cookie: {
    secure: true, // HTTPS only
    httpOnly: true, // Prevent XSS access
    sameSite: &#x27;strict&#x27;, // CSRF protection
    maxAge: 3600000 // 1 hour
  }
}));
```

### Session Timeout

Implement automatic session expiration:

```python
from datetime import datetime, timedelta

class SessionManager:
    def __init__(self):
        self.sessions = {}
        self.timeout = timedelta(minutes=30)
    
    def create_session(self, user_id):
        session_id = secrets.token_urlsafe(32)
        self.sessions[session_id] = {
            &#x27;user_id&#x27;: user_id,
            &#x27;created_at&#x27;: datetime.now(),
            &#x27;last_activity&#x27;: datetime.now()
        }
        return session_id
    
    def validate_session(self, session_id):
        if session_id not in self.sessions:
            return None
        
        session = self.sessions[session_id]
        if datetime.now() - session[&#x27;last_activity&#x27;] &gt; self.timeout:
            del self.sessions[session_id]
            return None
        
        session[&#x27;last_activity&#x27;] = datetime.now()
        return session[&#x27;user_id&#x27;]
```

## Multi-Factor Authentication (MFA)

### TOTP Implementation

```python
import pyotp
import qrcode

def setup_mfa(user_email):
    &quot;&quot;&quot;Generate MFA secret and QR code.&quot;&quot;&quot;
    secret = pyotp.random_base32()
    
    # Generate provisioning URI
    totp = pyotp.TOTP(secret)
    uri = totp.provisioning_uri(
        name=user_email,
        issuer_name=&#x27;YourApp&#x27;
    )
    
    # Generate QR code
    qr = qrcode.make(uri)
    
    return secret, qr

def verify_mfa_code(secret, code):
    &quot;&quot;&quot;Verify TOTP code.&quot;&quot;&quot;
    totp = pyotp.TOTP(secret)
    return totp.verify(code, valid_window=1)
```

## JWT Token Security

```javascript
const jwt = require(&#x27;jsonwebtoken&#x27;);

function generateToken(userId) {
  return jwt.sign(
    { userId: userId },
    process.env.JWT_SECRET,
    {
      expiresIn: &#x27;1h&#x27;,
      algorithm: &#x27;HS256&#x27;,
      issuer: &#x27;your-app&#x27;,
      audience: &#x27;your-app-users&#x27;
    }
  );
}

function verifyToken(token) {
  try {
    return jwt.verify(token, process.env.JWT_SECRET, {
      algorithms: [&#x27;HS256&#x27;],
      issuer: &#x27;your-app&#x27;,
      audience: &#x27;your-app-users&#x27;
    });
  } catch (error) {
    return null;
  }
}
```

## OAuth 2.0 Implementation

```python
from authlib.integrations.flask_client import OAuth

oauth = OAuth(app)

oauth.register(
    name=&#x27;google&#x27;,
    client_id=os.getenv(&#x27;GOOGLE_CLIENT_ID&#x27;),
    client_secret=os.getenv(&#x27;GOOGLE_CLIENT_SECRET&#x27;),
    server_metadata_url=&#x27;https://accounts.google.com/.well-known/openid-configuration&#x27;,
    client_kwargs={&#x27;scope&#x27;: &#x27;openid email profile&#x27;}
)

@app.route(&#x27;/login/google&#x27;)
def google_login():
    redirect_uri = url_for(&#x27;google_callback&#x27;, _external=True)
    return oauth.google.authorize_redirect(redirect_uri)

@app.route(&#x27;/callback/google&#x27;)
def google_callback():
    token = oauth.google.authorize_access_token()
    user_info = oauth.google.parse_id_token(token)
    # Create or update user session
    return redirect(&#x27;/dashboard&#x27;)
```

## Brute Force Protection

```python
from datetime import datetime, timedelta
from collections import defaultdict

class LoginAttemptTracker:
    def __init__(self):
        self.attempts = defaultdict(list)
        self.max_attempts = 5
        self.lockout_duration = timedelta(minutes=15)
    
    def is_locked(self, identifier):
        &quot;&quot;&quot;Check if account/IP is locked.&quot;&quot;&quot;
        if identifier not in self.attempts:
            return False
        
        # Clean old attempts
        cutoff = datetime.now() - self.lockout_duration
        self.attempts[identifier] = [
            attempt for attempt in self.attempts[identifier]
            if attempt &gt; cutoff
        ]
        
        return len(self.attempts[identifier]) &gt;= self.max_attempts
    
    def record_attempt(self, identifier, success):
        &quot;&quot;&quot;Record login attempt.&quot;&quot;&quot;
        if success:
            # Clear attempts on success
            self.attempts[identifier] = []
        else:
            self.attempts[identifier].append(datetime.now())
```

## Security Checklist

- [ ] Passwords are hashed with bcrypt/argon2
- [ ] Strong password requirements enforced
- [ ] MFA is available
- [ ] Sessions expire after inactivity
- [ ] HTTPS is enforced
- [ ] Cookies are secure and httpOnly
- [ ] CSRF protection is enabled
- [ ] Brute force protection implemented
- [ ] Account lockout after failed attempts
- [ ] Password reset tokens expire
- [ ] Secure password reset flow
- [ ] No sensitive data in URLs

## Common Vulnerabilities

1. **Weak passwords** - Enforce complexity requirements
2. **Session fixation** - Regenerate session ID after login
3. **Missing MFA** - Offer two-factor authentication
4. **Insecure password reset** - Use secure tokens, verify identity
5. **No account lockout** - Implement brute force protection
6. **Plaintext passwords** - Always hash passwords
7. **Predictable tokens** - Use cryptographically secure random generators

Remember: Authentication is the gateway to your applicationget it right!
</p></div></div></div></div></div></div></div></div><div class="w-full md:w-3/5 lg:w-2/3 h-[40vh] md:h-auto border-t md:border-t-0 border-gray-200 dark:border-gray-700 shadow-2xl md:shadow-none z-10 bg-white dark:bg-gray-900"><div class="flex flex-col h-full border-l border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900"><div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-800 shrink-0"><div class="text-sm text-gray-600 dark:text-gray-400"><span class="font-semibold">0</span> rules selected</div><div class="flex gap-2"><button disabled="" class="px-4 py-2 rounded-md text-sm font-medium transition-colors shadow-sm bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-400">Copy Rules</button></div></div><div class="flex-1 p-0 overflow-hidden relative"><div class="absolute inset-0 flex flex-col items-center justify-center text-gray-400 dark:text-gray-500 p-4 text-center"><svg class="w-16 h-16 mb-4 opacity-30" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><p class="text-lg font-medium">No rules selected</p><p class="text-sm mt-2 opacity-70">Select prompts from the list to combine them here.</p></div></div></div></div></div></div><!--$--><!--/$--><script src="/prompts/_next/static/chunks/5531c5ac135a17df.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[29629,[\"/prompts/_next/static/chunks/b4ddc1a8749ef82e.js\"],\"default\"]\n3:I[39756,[\"/prompts/_next/static/chunks/42879de7b8087bc9.js\"],\"default\"]\n4:I[37457,[\"/prompts/_next/static/chunks/42879de7b8087bc9.js\"],\"default\"]\n5:I[27521,[\"/prompts/_next/static/chunks/b4ddc1a8749ef82e.js\",\"/prompts/_next/static/chunks/5ccbe578a5df9eac.js\"],\"default\"]\nf:I[68027,[],\"default\"]\n:HL[\"/prompts/_next/static/chunks/1d5639018d1afc60.css\",\"style\"]\n:HL[\"/prompts/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/prompts/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n6:T1644,"])</script><script>self.__next_f.push([1,"# Input Validation Best Practices\n\nInput validation is the first line of defense against security vulnerabilities. Always validate, sanitize, and verify user input before processing.\n\n## Core Principles\n\n1. **Never trust user input** - Assume all external data is malicious\n2. **Validate on the server** - Client-side validation is for UX only\n3. **Use allowlists over denylists** - Define what is acceptable\n4. **Fail securely** - Reject invalid input by default\n\n## Common Validation Patterns\n\n### Email Validation\n\n```javascript\nfunction validateEmail(email) {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  \n  if (!email || typeof email !== 'string') {\n    throw new Error('Email is required and must be a string');\n  }\n  \n  if (email.length \u003e 254) {\n    throw new Error('Email exceeds maximum length');\n  }\n  \n  if (!emailRegex.test(email)) {\n    throw new Error('Invalid email format');\n  }\n  \n  return email.toLowerCase().trim();\n}\n```\n\n### Numeric Input Validation\n\n```python\ndef validate_age(age):\n    \"\"\"Validate age input with range checking.\"\"\"\n    try:\n        age_int = int(age)\n    except (ValueError, TypeError):\n        raise ValueError(\"Age must be a valid integer\")\n    \n    if age_int \u003c 0 or age_int \u003e 150:\n        raise ValueError(\"Age must be between 0 and 150\")\n    \n    return age_int\n```\n\n### String Sanitization\n\n```java\npublic class InputValidator {\n    private static final Pattern ALPHANUMERIC = Pattern.compile(\"^[a-zA-Z0-9_-]+$\");\n    \n    public static String sanitizeUsername(String username) {\n        if (username == null || username.isEmpty()) {\n            throw new IllegalArgumentException(\"Username cannot be empty\");\n        }\n        \n        String trimmed = username.trim();\n        \n        if (trimmed.length() \u003c 3 || trimmed.length() \u003e 20) {\n            throw new IllegalArgumentException(\"Username must be 3-20 characters\");\n        }\n        \n        if (!ALPHANUMERIC.matcher(trimmed).matches()) {\n            throw new IllegalArgumentException(\"Username contains invalid characters\");\n        }\n        \n        return trimmed;\n    }\n}\n```\n\n## SQL Injection Prevention\n\n**ALWAYS use parameterized queries:**\n\n```sql\n-- DANGEROUS - vulnerable to SQL injection\nSELECT * FROM users WHERE username = '\" + userInput + \"'\n\n-- SAFE - parameterized query\nSELECT * FROM users WHERE username = ?\n```\n\n```python\n# DANGEROUS\ncursor.execute(f\"SELECT * FROM users WHERE id = {user_id}\")\n\n# SAFE\ncursor.execute(\"SELECT * FROM users WHERE id = ?\", (user_id,))\n```\n\n## XSS Prevention\n\nEscape output based on context:\n\n```javascript\n// HTML context\nfunction escapeHtml(unsafe) {\n  return unsafe\n    .replace(/\u0026/g, \"\u0026amp;\")\n    .replace(/\u003c/g, \"\u0026lt;\")\n    .replace(/\u003e/g, \"\u0026gt;\")\n    .replace(/\"/g, \"\u0026quot;\")\n    .replace(/'/g, \"\u0026#039;\");\n}\n\n// JavaScript context\nfunction escapeJs(unsafe) {\n  return JSON.stringify(unsafe).slice(1, -1);\n}\n\n// URL context\nfunction escapeUrl(unsafe) {\n  return encodeURIComponent(unsafe);\n}\n```\n\n## File Upload Validation\n\n```python\nALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg', 'gif', 'pdf'}\nMAX_FILE_SIZE = 5 * 1024 * 1024  # 5MB\n\ndef validate_file_upload(file):\n    # Check file exists\n    if not file or not file.filename:\n        raise ValueError(\"No file provided\")\n    \n    # Check extension\n    ext = file.filename.rsplit('.', 1)[1].lower() if '.' in file.filename else ''\n    if ext not in ALLOWED_EXTENSIONS:\n        raise ValueError(f\"File type .{ext} not allowed\")\n    \n    # Check file size\n    file.seek(0, 2)  # Seek to end\n    size = file.tell()\n    file.seek(0)  # Reset\n    \n    if size \u003e MAX_FILE_SIZE:\n        raise ValueError(\"File exceeds maximum size\")\n    \n    # Verify MIME type matches extension\n    import magic\n    mime = magic.from_buffer(file.read(1024), mime=True)\n    file.seek(0)\n    \n    allowed_mimes = {\n        'png': 'image/png',\n        'jpg': 'image/jpeg',\n        'jpeg': 'image/jpeg',\n        'gif': 'image/gif',\n        'pdf': 'application/pdf'\n    }\n    \n    if mime != allowed_mimes.get(ext):\n        raise ValueError(\"File content doesn't match extension\")\n    \n    return True\n```\n\n## API Rate Limiting\n\nImplement rate limiting to prevent abuse:\n\n```javascript\nconst rateLimit = require('express-rate-limit');\n\nconst limiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 100, // Limit each IP to 100 requests per windowMs\n  message: 'Too many requests, please try again later',\n  standardHeaders: true,\n  legacyHeaders: false,\n});\n\napp.use('/api/', limiter);\n```\n\n## Validation Checklist\n\n- [ ] All user inputs are validated\n- [ ] Validation happens server-side\n- [ ] Length limits are enforced\n- [ ] Type checking is performed\n- [ ] Range checks for numeric values\n- [ ] Format validation (regex patterns)\n- [ ] Encoding/escaping for output\n- [ ] File uploads are restricted and verified\n- [ ] Rate limiting is implemented\n- [ ] Error messages don't leak sensitive info\n\n## Common Mistakes to Avoid\n\n1. **Trusting client-side validation alone**\n2. **Using denylists instead of allowlists**\n3. **Insufficient length checking**\n4. **Revealing system details in error messages**\n5. **Not validating data from trusted sources**\n6. **Concatenating user input into queries**\n7. **Forgetting to validate file uploads**\n8. **Not implementing rate limiting**\n\n## Testing Your Validation\n\nTest with malicious inputs:\n\n- SQL injection: `' OR '1'='1`\n- XSS: `\u003cscript\u003ealert('XSS')\u003c/script\u003e`\n- Path traversal: `../../etc/passwd`\n- Command injection: `; rm -rf /`\n- Null bytes: `file.txt\\0.jpg`\n- Extremely long strings\n- Special characters: `!@#$%^\u0026*()`\n- Unicode characters: `\\u0000`, `\\uFEFF`\n\nRemember: Input validation is not optionalit's a fundamental security requirement!\n"])</script><script>self.__next_f.push([1,"7:T1c28,"])</script><script>self.__next_f.push([1,"# Authentication Best Practices\n\nSecure authentication is critical for protecting user accounts and sensitive data.\n\n## Password Security\n\n### Password Hashing\n\n**NEVER store passwords in plain text.** Always use modern hashing algorithms:\n\n```python\nimport bcrypt\n\n# Hashing a password\ndef hash_password(password):\n    salt = bcrypt.gensalt(rounds=12)\n    return bcrypt.hashpw(password.encode('utf-8'), salt)\n\n# Verifying a password\ndef verify_password(password, hashed):\n    return bcrypt.checkpw(password.encode('utf-8'), hashed)\n```\n\n```javascript\nconst bcrypt = require('bcrypt');\n\nasync function hashPassword(password) {\n  const saltRounds = 12;\n  return await bcrypt.hash(password, saltRounds);\n}\n\nasync function verifyPassword(password, hash) {\n  return await bcrypt.compare(password, hash);\n}\n```\n\n### Password Requirements\n\nEnforce strong password policies:\n\n```python\nimport re\n\ndef validate_password_strength(password):\n    \"\"\"Validate password meets security requirements.\"\"\"\n    errors = []\n    \n    if len(password) \u003c 12:\n        errors.append(\"Password must be at least 12 characters\")\n    \n    if len(password) \u003e 128:\n        errors.append(\"Password must not exceed 128 characters\")\n    \n    if not re.search(r'[a-z]', password):\n        errors.append(\"Password must contain lowercase letters\")\n    \n    if not re.search(r'[A-Z]', password):\n        errors.append(\"Password must contain uppercase letters\")\n    \n    if not re.search(r'\\d', password):\n        errors.append(\"Password must contain numbers\")\n    \n    if not re.search(r'[!@#$%^\u0026*(),.?\":{}|\u003c\u003e]', password):\n        errors.append(\"Password must contain special characters\")\n    \n    # Check against common passwords\n    with open('common_passwords.txt') as f:\n        if password.lower() in [line.strip().lower() for line in f]:\n            errors.append(\"Password is too common\")\n    \n    return errors\n```\n\n## Session Management\n\n### Secure Session Configuration\n\n```javascript\nconst session = require('express-session');\n\napp.use(session({\n  secret: process.env.SESSION_SECRET, // Strong, random secret\n  name: 'sessionId', // Don't use default name\n  resave: false,\n  saveUninitialized: false,\n  cookie: {\n    secure: true, // HTTPS only\n    httpOnly: true, // Prevent XSS access\n    sameSite: 'strict', // CSRF protection\n    maxAge: 3600000 // 1 hour\n  }\n}));\n```\n\n### Session Timeout\n\nImplement automatic session expiration:\n\n```python\nfrom datetime import datetime, timedelta\n\nclass SessionManager:\n    def __init__(self):\n        self.sessions = {}\n        self.timeout = timedelta(minutes=30)\n    \n    def create_session(self, user_id):\n        session_id = secrets.token_urlsafe(32)\n        self.sessions[session_id] = {\n            'user_id': user_id,\n            'created_at': datetime.now(),\n            'last_activity': datetime.now()\n        }\n        return session_id\n    \n    def validate_session(self, session_id):\n        if session_id not in self.sessions:\n            return None\n        \n        session = self.sessions[session_id]\n        if datetime.now() - session['last_activity'] \u003e self.timeout:\n            del self.sessions[session_id]\n            return None\n        \n        session['last_activity'] = datetime.now()\n        return session['user_id']\n```\n\n## Multi-Factor Authentication (MFA)\n\n### TOTP Implementation\n\n```python\nimport pyotp\nimport qrcode\n\ndef setup_mfa(user_email):\n    \"\"\"Generate MFA secret and QR code.\"\"\"\n    secret = pyotp.random_base32()\n    \n    # Generate provisioning URI\n    totp = pyotp.TOTP(secret)\n    uri = totp.provisioning_uri(\n        name=user_email,\n        issuer_name='YourApp'\n    )\n    \n    # Generate QR code\n    qr = qrcode.make(uri)\n    \n    return secret, qr\n\ndef verify_mfa_code(secret, code):\n    \"\"\"Verify TOTP code.\"\"\"\n    totp = pyotp.TOTP(secret)\n    return totp.verify(code, valid_window=1)\n```\n\n## JWT Token Security\n\n```javascript\nconst jwt = require('jsonwebtoken');\n\nfunction generateToken(userId) {\n  return jwt.sign(\n    { userId: userId },\n    process.env.JWT_SECRET,\n    {\n      expiresIn: '1h',\n      algorithm: 'HS256',\n      issuer: 'your-app',\n      audience: 'your-app-users'\n    }\n  );\n}\n\nfunction verifyToken(token) {\n  try {\n    return jwt.verify(token, process.env.JWT_SECRET, {\n      algorithms: ['HS256'],\n      issuer: 'your-app',\n      audience: 'your-app-users'\n    });\n  } catch (error) {\n    return null;\n  }\n}\n```\n\n## OAuth 2.0 Implementation\n\n```python\nfrom authlib.integrations.flask_client import OAuth\n\noauth = OAuth(app)\n\noauth.register(\n    name='google',\n    client_id=os.getenv('GOOGLE_CLIENT_ID'),\n    client_secret=os.getenv('GOOGLE_CLIENT_SECRET'),\n    server_metadata_url='https://accounts.google.com/.well-known/openid-configuration',\n    client_kwargs={'scope': 'openid email profile'}\n)\n\n@app.route('/login/google')\ndef google_login():\n    redirect_uri = url_for('google_callback', _external=True)\n    return oauth.google.authorize_redirect(redirect_uri)\n\n@app.route('/callback/google')\ndef google_callback():\n    token = oauth.google.authorize_access_token()\n    user_info = oauth.google.parse_id_token(token)\n    # Create or update user session\n    return redirect('/dashboard')\n```\n\n## Brute Force Protection\n\n```python\nfrom datetime import datetime, timedelta\nfrom collections import defaultdict\n\nclass LoginAttemptTracker:\n    def __init__(self):\n        self.attempts = defaultdict(list)\n        self.max_attempts = 5\n        self.lockout_duration = timedelta(minutes=15)\n    \n    def is_locked(self, identifier):\n        \"\"\"Check if account/IP is locked.\"\"\"\n        if identifier not in self.attempts:\n            return False\n        \n        # Clean old attempts\n        cutoff = datetime.now() - self.lockout_duration\n        self.attempts[identifier] = [\n            attempt for attempt in self.attempts[identifier]\n            if attempt \u003e cutoff\n        ]\n        \n        return len(self.attempts[identifier]) \u003e= self.max_attempts\n    \n    def record_attempt(self, identifier, success):\n        \"\"\"Record login attempt.\"\"\"\n        if success:\n            # Clear attempts on success\n            self.attempts[identifier] = []\n        else:\n            self.attempts[identifier].append(datetime.now())\n```\n\n## Security Checklist\n\n- [ ] Passwords are hashed with bcrypt/argon2\n- [ ] Strong password requirements enforced\n- [ ] MFA is available\n- [ ] Sessions expire after inactivity\n- [ ] HTTPS is enforced\n- [ ] Cookies are secure and httpOnly\n- [ ] CSRF protection is enabled\n- [ ] Brute force protection implemented\n- [ ] Account lockout after failed attempts\n- [ ] Password reset tokens expire\n- [ ] Secure password reset flow\n- [ ] No sensitive data in URLs\n\n## Common Vulnerabilities\n\n1. **Weak passwords** - Enforce complexity requirements\n2. **Session fixation** - Regenerate session ID after login\n3. **Missing MFA** - Offer two-factor authentication\n4. **Insecure password reset** - Use secure tokens, verify identity\n5. **No account lockout** - Implement brute force protection\n6. **Plaintext passwords** - Always hash passwords\n7. **Predictable tokens** - Use cryptographically secure random generators\n\nRemember: Authentication is the gateway to your applicationget it right!\n"])</script><script>self.__next_f.push([1,"8:T2338,"])</script><script>self.__next_f.push([1,"# Debugging Strategies\n\nEffective debugging is a critical skill. Use systematic approaches to identify and fix issues quickly.\n\n## The Debugging Mindset\n\n1. **Stay calm** - Frustration clouds judgment\n2. **Be systematic** - Follow a methodical process\n3. **Question assumptions** - The bug is often where you least expect\n4. **Reproduce first** - Understand how to trigger the issue\n5. **Isolate the problem** - Narrow down the scope\n\n## Initial Steps\n\n### 1. Reproduce the Bug\n\n- [ ] Can you consistently trigger the bug?\n- [ ] What are the exact steps to reproduce?\n- [ ] Does it happen in all environments?\n- [ ] What's the expected vs. actual behavior?\n\n### 2. Gather Information\n\n```python\n# Add detailed logging\nimport logging\n\nlogging.basicConfig(level=logging.DEBUG)\nlogger = logging.getLogger(__name__)\n\ndef process_order(order):\n    logger.debug(f\"Processing order: {order.id}\")\n    logger.debug(f\"Order data: {order.to_dict()}\")\n    \n    try:\n        result = validate_order(order)\n        logger.debug(f\"Validation result: {result}\")\n    except Exception as e:\n        logger.error(f\"Validation failed: {e}\", exc_info=True)\n        raise\n```\n\n### 3. Read Error Messages Carefully\n\n```\nTraceback (most recent call last):\n  File \"main.py\", line 42, in process_data\n    result = transform(data['values'])\nKeyError: 'values'\n```\n\nWhat this tells you:\n- Error type: `KeyError`\n- Missing key: `'values'`\n- Location: `main.py` line 42\n- Function: `process_data`\n\n## Debugging Techniques\n\n### Print/Log Debugging\n\n```javascript\nfunction calculateDiscount(price, percentage) {\n  console.log('calculateDiscount called:', { price, percentage });\n  \n  const discount = price * (percentage / 100);\n  console.log('Calculated discount:', discount);\n  \n  const finalPrice = price - discount;\n  console.log('Final price:', finalPrice);\n  \n  return finalPrice;\n}\n```\n\n### Binary Search / Divide and Conquer\n\nComment out half the code to isolate the problem:\n\n```python\ndef complex_function(data):\n    # Part 1\n    step1 = transform_data(data)\n    step2 = validate_data(step1)\n    step3 = enrich_data(step2)\n    \n    # Part 2 - Comment this out first\n    # step4 = process_data(step3)\n    # step5 = finalize_data(step4)\n    # return step5\n    \n    return step3  # Return early to test Part 1\n```\n\n### Rubber Duck Debugging\n\nExplain your code line-by-line to someone (or something):\n\n1. What does this line do?\n2. What values do I expect here?\n3. What assumptions am I making?\n4. Could this fail?\n\n### Add Assertions\n\n```typescript\nfunction getUserById(id: string): User {\n  console.assert(typeof id === 'string', 'id must be a string');\n  console.assert(id.length \u003e 0, 'id cannot be empty');\n  \n  const user = database.users.find(u =\u003e u.id === id);\n  \n  console.assert(user !== undefined, `User ${id} not found`);\n  \n  return user;\n}\n```\n\n## Debugger Usage\n\n### JavaScript/Node.js\n\n```javascript\nfunction processData(items) {\n  debugger; // Execution will pause here\n  \n  for (let item of items) {\n    if (item.price \u003e 100) {\n      debugger; // Conditional breakpoint location\n      applyDiscount(item);\n    }\n  }\n}\n\n// Run with: node inspect script.js\n// Or use Chrome DevTools\n```\n\n### Python (pdb)\n\n```python\nimport pdb\n\ndef calculate_total(items):\n    total = 0\n    for item in items:\n        pdb.set_trace()  # Debugger starts here\n        total += item['price'] * item['quantity']\n    return total\n\n# Commands:\n# n - next line\n# s - step into\n# c - continue\n# p variable - print variable\n# l - list code\n# q - quit\n```\n\n### Browser DevTools\n\n```javascript\n// Conditional breakpoint\nfunction processUser(user) {\n  // Right-click breakpoint, add condition: user.age \u003c 18\n  if (user.isActive) {\n    sendNotification(user);\n  }\n}\n\n// Log points (no code changes needed)\n// Right-click line number \u003e Add logpoint\n// Enter: 'User:', user, 'Status:', user.status\n```\n\n## Common Bug Patterns\n\n### Off-by-One Errors\n\n```python\n# Bug: Misses last element\nfor i in range(len(items) - 1):\n    process(items[i])\n\n# Fix: Include all elements\nfor i in range(len(items)):\n    process(items[i])\n\n# Better: Use iteration\nfor item in items:\n    process(item)\n```\n\n### Null/Undefined Issues\n\n```javascript\n// Bug: Potential null reference\nfunction getUsername(user) {\n  return user.profile.name; // Crashes if profile is null\n}\n\n// Fix: Defensive checks\nfunction getUsername(user) {\n  if (!user || !user.profile) {\n    return 'Unknown';\n  }\n  return user.profile.name;\n}\n\n// Modern: Optional chaining\nfunction getUsername(user) {\n  return user?.profile?.name ?? 'Unknown';\n}\n```\n\n### Type Mismatches\n\n```python\n# Bug: String concatenation instead of addition\ndef calculate_total(a, b):\n    return a + b\n\nresult = calculate_total('10', '20')  # Returns '1020' not 30\n\n# Fix: Type validation\ndef calculate_total(a, b):\n    if not isinstance(a, (int, float)) or not isinstance(b, (int, float)):\n        raise TypeError('Arguments must be numeric')\n    return a + b\n```\n\n### Race Conditions\n\n```javascript\n// Bug: Race condition\nlet counter = 0;\n\nasync function increment() {\n  const current = counter;\n  await delay(100);\n  counter = current + 1;\n}\n\n// Fix: Atomic operations or locking\nlet counter = 0;\nconst lock = new AsyncLock();\n\nasync function increment() {\n  await lock.acquire('counter', async () =\u003e {\n    counter += 1;\n  });\n}\n```\n\n### Memory Leaks\n\n```javascript\n// Bug: Event listener leak\nfunction setupComponent() {\n  const button = document.getElementById('myButton');\n  button.addEventListener('click', handleClick);\n  // Component gets recreated but listeners accumulate\n}\n\n// Fix: Clean up listeners\nfunction setupComponent() {\n  const button = document.getElementById('myButton');\n  button.removeEventListener('click', handleClick);\n  button.addEventListener('click', handleClick);\n}\n\nfunction cleanup() {\n  const button = document.getElementById('myButton');\n  button.removeEventListener('click', handleClick);\n}\n```\n\n## Advanced Techniques\n\n### Time-Travel Debugging\n\nUse tools like:\n- Redux DevTools (JavaScript)\n- rr (C/C++)\n- Replay.io (JavaScript)\n\n### Performance Debugging\n\n```javascript\n// Measure execution time\nconsole.time('processData');\nprocessData(largeDataset);\nconsole.timeEnd('processData');\n\n// Profile specific sections\nperformance.mark('start-processing');\nprocessData(data);\nperformance.mark('end-processing');\nperformance.measure('processing', 'start-processing', 'end-processing');\n\n// Get measurements\nconst measures = performance.getEntriesByType('measure');\nconsole.log(measures[0].duration);\n```\n\n### Network Debugging\n\n```python\n# Debug HTTP requests\nimport requests\nimport logging\n\n# Enable debug logging\nlogging.basicConfig(level=logging.DEBUG)\n\nresponse = requests.get('https://api.example.com/data')\nprint(f\"Status: {response.status_code}\")\nprint(f\"Headers: {response.headers}\")\nprint(f\"Body: {response.text}\")\n```\n\n### Database Query Debugging\n\n```python\n# SQLAlchemy query debugging\nimport logging\nlogging.getLogger('sqlalchemy.engine').setLevel(logging.INFO)\n\n# Django query debugging\nfrom django.db import connection\nprint(connection.queries)\n\n# Count queries\nfrom django.db import reset_queries\nreset_queries()\n# ... run code ...\nprint(f\"Queries executed: {len(connection.queries)}\")\n```\n\n## Debugging Checklist\n\n### When Stuck\n\n- [ ] Take a break - fresh eyes help\n- [ ] Read error message completely\n- [ ] Check recent changes (git diff)\n- [ ] Verify assumptions with print/log statements\n- [ ] Search error message online\n- [ ] Check documentation\n- [ ] Review similar working code\n- [ ] Ask for help (rubber duck first!)\n\n### Questions to Ask\n\n1. **What changed?** - Was it working before?\n2. **What's different?** - Different environment, data, user?\n3. **What am I assuming?** - Are my assumptions correct?\n4. **Can I simplify?** - Minimal reproduction case?\n5. **What does the data look like?** - Inspect actual values\n\n## Tools and Resources\n\n### JavaScript/TypeScript\n- Chrome DevTools\n- VS Code Debugger\n- Node.js inspect\n- React DevTools\n- Redux DevTools\n\n### Python\n- pdb (built-in debugger)\n- ipdb (enhanced pdb)\n- VS Code Debugger\n- PyCharm Debugger\n- Python Tutor (visualizer)\n\n### General\n- Git bisect (find breaking commit)\n- Wireshark (network analysis)\n- Postman (API testing)\n- Browser network tab\n- System monitors (htop, Activity Monitor)\n\n## Documentation\n\nWhen you fix a bug:\n\n```python\ndef calculate_discount(price, quantity):\n    \"\"\"\n    Calculate discount based on quantity.\n    \n    Bug fix: Previously returned negative discount for quantity=0.\n    Now returns 0 discount for quantity \u003c= 1.\n    \n    See issue #123 for details.\n    \"\"\"\n    if quantity \u003c= 1:\n        return 0\n    return price * 0.1 * (quantity - 1)\n```\n\n## Prevention\n\nAfter fixing:\n\n1. **Add a test** - Prevent regression\n2. **Document the fix** - Help future developers\n3. **Look for similar bugs** - Same pattern elsewhere?\n4. **Refactor if needed** - Make it harder to break\n5. **Share learnings** - Help the team\n\nRemember: Every bug is an opportunity to learn and improve your code!\n"])</script><script>self.__next_f.push([1,"9:T1add,"])</script><script>self.__next_f.push([1,"# Code Review Checklist\n\nA comprehensive checklist for conducting thorough and effective code reviews.\n\n## General\n\n- [ ] Code serves a clear purpose and solves the intended problem\n- [ ] Changes align with project requirements and specifications\n- [ ] No unnecessary or unused code\n- [ ] No commented-out code blocks\n- [ ] No debug statements or console logs left in production code\n\n## Code Quality\n\n- [ ] Code is readable and easy to understand\n- [ ] Functions are small and focused (single responsibility)\n- [ ] Code follows DRY principle (Don't Repeat Yourself)\n- [ ] Complex logic is broken down into smaller functions\n- [ ] Magic numbers replaced with named constants\n- [ ] No overly clever or obscure code\n\n## Naming\n\n- [ ] Variables have clear, descriptive names\n- [ ] Functions have verb-based names that describe actions\n- [ ] Classes use noun-based names\n- [ ] Boolean variables use is/has/can/should prefixes\n- [ ] Names follow project conventions (camelCase, snake_case, etc.)\n- [ ] No single-letter variables except loop counters\n\n## Error Handling\n\n- [ ] All error cases are handled appropriately\n- [ ] Errors include helpful messages\n- [ ] Resources are cleaned up in finally blocks\n- [ ] No empty catch blocks\n- [ ] Errors are logged with sufficient context\n- [ ] User-facing error messages are clear and actionable\n\n## Security\n\n- [ ] No hardcoded credentials or secrets\n- [ ] User input is validated and sanitized\n- [ ] SQL queries use parameterized statements\n- [ ] Authentication and authorization are properly implemented\n- [ ] Sensitive data is encrypted\n- [ ] HTTPS is used for all external requests\n- [ ] CSRF protection is in place\n- [ ] Rate limiting is implemented where needed\n\n## Performance\n\n- [ ] No unnecessary database queries\n- [ ] Queries are optimized and use proper indexes\n- [ ] No N+1 query problems\n- [ ] Large datasets are paginated\n- [ ] Expensive operations are cached when appropriate\n- [ ] No infinite loops or recursion without base case\n- [ ] Appropriate data structures are used\n\n## Testing\n\n- [ ] New code has adequate test coverage\n- [ ] Tests are clear and well-named\n- [ ] Edge cases are tested\n- [ ] Tests are independent and can run in any order\n- [ ] Mocks and stubs are used appropriately\n- [ ] All tests pass\n- [ ] Integration tests cover critical paths\n\n## Documentation\n\n- [ ] Public APIs have clear documentation\n- [ ] Complex algorithms are explained\n- [ ] Non-obvious decisions are justified with comments\n- [ ] README is updated if needed\n- [ ] API documentation is updated\n- [ ] Breaking changes are clearly documented\n\n## Database\n\n- [ ] Migrations are reversible\n- [ ] Indexes are added for frequently queried columns\n- [ ] Foreign key constraints are properly defined\n- [ ] No N+1 queries\n- [ ] Transactions are used for multi-step operations\n- [ ] Database connections are properly closed\n\n## API Design\n\n- [ ] RESTful conventions are followed\n- [ ] Endpoints use appropriate HTTP methods\n- [ ] Status codes are correct and meaningful\n- [ ] Request/response schemas are validated\n- [ ] API versioning is considered\n- [ ] Pagination is implemented for lists\n- [ ] Rate limiting is in place\n\n## Dependencies\n\n- [ ] No unnecessary dependencies added\n- [ ] Dependencies are at stable versions\n- [ ] License compatibility is verified\n- [ ] Dependencies are actively maintained\n- [ ] Security vulnerabilities are checked\n\n## Git Practices\n\n- [ ] Commit messages are clear and descriptive\n- [ ] Commits are atomic and focused\n- [ ] No large files committed\n- [ ] No sensitive data in commit history\n- [ ] Branch naming follows conventions\n\n## Code Style\n\n- [ ] Code follows project style guide\n- [ ] Indentation is consistent\n- [ ] Line length is within limits\n- [ ] Linter passes without warnings\n- [ ] Formatting is consistent\n\n## Specific Language Checks\n\n### JavaScript/TypeScript\n\n- [ ] === used instead of ==\n- [ ] Promises are properly handled\n- [ ] async/await used correctly\n- [ ] TypeScript types are properly defined\n- [ ] No 'any' types unless justified\n- [ ] Null/undefined checks are in place\n\n### Python\n\n- [ ] Follows PEP 8 style guide\n- [ ] Type hints are used\n- [ ] Context managers used for resources\n- [ ] List comprehensions used appropriately\n- [ ] F-strings used for formatting\n\n### Java\n\n- [ ] Proper exception handling\n- [ ] Resources closed in finally or try-with-resources\n- [ ] Proper use of access modifiers\n- [ ] Immutability used where appropriate\n- [ ] Generics used correctly\n\n## Review Process\n\n### Before Reviewing\n\n1. Understand the context and requirements\n2. Check the ticket/issue description\n3. Review the overall approach before details\n\n### During Review\n\n1. Start with architecture and design\n2. Check for security issues\n3. Look for performance problems\n4. Verify error handling\n5. Check test coverage\n6. Review code style last\n\n### Providing Feedback\n\n- [ ] Comments are constructive and specific\n- [ ] Suggestions include reasoning\n- [ ] Praise good solutions\n- [ ] Distinguish between required and optional changes\n- [ ] Ask questions instead of making demands\n- [ ] Provide code examples for complex suggestions\n\n## Common Issues to Watch For\n\n### Logic Errors\n\n```javascript\n// Bad: Off-by-one error\nfor (let i = 0; i \u003c= array.length; i++) {\n  console.log(array[i]); // Will error on last iteration\n}\n\n// Good\nfor (let i = 0; i \u003c array.length; i++) {\n  console.log(array[i]);\n}\n```\n\n### Resource Leaks\n\n```python\n# Bad: File not closed on error\nfile = open('data.txt', 'r')\ndata = process(file.read())\nfile.close()\n\n# Good: Context manager ensures cleanup\nwith open('data.txt', 'r') as file:\n    data = process(file.read())\n```\n\n### Race Conditions\n\n```javascript\n// Bad: Race condition\nif (!cache.has(key)) {\n  cache.set(key, await fetchData(key));\n}\n\n// Good: Atomic operation\nif (!cache.has(key)) {\n  const data = await fetchData(key);\n  if (!cache.has(key)) {  // Double-check\n    cache.set(key, data);\n  }\n}\n```\n\n### SQL Injection\n\n```python\n# Bad: SQL injection vulnerability\nquery = f\"SELECT * FROM users WHERE username = '{username}'\"\n\n# Good: Parameterized query\nquery = \"SELECT * FROM users WHERE username = ?\"\ncursor.execute(query, (username,))\n```\n\n## Review Etiquette\n\n### Do\n\n- Be respectful and professional\n- Focus on the code, not the person\n- Explain why something should change\n- Ask questions to understand intent\n- Acknowledge good work\n- Be timely with reviews\n\n### Don't\n\n- Be condescending or dismissive\n- Make personal attacks\n- Nitpick trivial style issues\n- Block on personal preferences\n- Rewrite entire implementations in comments\n- Let reviews sit for days\n\n## Final Checklist\n\nBefore approving:\n\n- [ ] All comments addressed or discussed\n- [ ] Tests pass in CI/CD\n- [ ] No merge conflicts\n- [ ] Documentation updated\n- [ ] Ready for production deployment\n\nRemember: Code reviews are about collaboration and learning, not gatekeeping!\n"])</script><script>self.__next_f.push([1,"a:T1749,"])</script><script>self.__next_f.push([1,"# Naming Conventions\n\nClear, consistent naming is essential for maintainable code. Follow these conventions for better readability.\n\n## General Principles\n\n1. **Be descriptive** - Names should reveal intent\n2. **Be consistent** - Follow language conventions\n3. **Avoid abbreviations** - Unless universally understood\n4. **Use pronounceable names** - Code is read more than written\n5. **Avoid mental mapping** - Don't make readers translate names\n\n## Variables\n\n### Use meaningful names\n\n```javascript\n// Bad\nlet d; // elapsed time in days\nlet x = getUserData();\n\n// Good\nlet elapsedTimeInDays;\nlet userData = getUserData();\n```\n\n### Boolean variables\n\nPrefix with `is`, `has`, `can`, `should`:\n\n```python\n# Good\nis_active = True\nhas_permission = check_permission()\ncan_edit = user.role == 'admin'\nshould_notify = user.preferences.notifications\n```\n\n### Collections\n\nUse plural names:\n\n```java\n// Bad\nList\u003cUser\u003e userList;\nSet\u003cString\u003e nameSet;\n\n// Good\nList\u003cUser\u003e users;\nSet\u003cString\u003e names;\nMap\u003cString, Integer\u003e scoresByPlayer;\n```\n\n## Functions and Methods\n\n### Use verb phrases\n\n```typescript\n// Bad\nfunction data() { }\nfunction user(id) { }\n\n// Good\nfunction fetchData() { }\nfunction getUserById(id: string) { }\nfunction calculateTotal(items: Item[]) { }\nfunction isValidEmail(email: string): boolean { }\n```\n\n### Consistent naming patterns\n\n```python\n# Getters/Setters\ndef get_username(self):\n    return self._username\n\ndef set_username(self, value):\n    self._username = value\n\n# Boolean queries\ndef is_authenticated(self):\n    return self._authenticated\n\ndef has_permission(self, permission):\n    return permission in self._permissions\n\n# Actions\ndef create_user(data):\n    pass\n\ndef update_profile(user_id, data):\n    pass\n\ndef delete_comment(comment_id):\n    pass\n```\n\n## Classes\n\n### Use nouns or noun phrases\n\n```java\n// Bad\nclass HandleData { }\nclass DoStuff { }\n\n// Good\nclass User { }\nclass ShoppingCart { }\nclass PaymentProcessor { }\nclass EmailValidator { }\n```\n\n### Avoid generic names\n\n```typescript\n// Bad\nclass Manager { }\nclass Helper { }\nclass Utility { }\n\n// Good\nclass UserSessionManager { }\nclass StringHelper { }\nclass DateUtility { }\n```\n\n## Constants\n\n### Use UPPER_SNAKE_CASE\n\n```python\nMAX_RETRY_ATTEMPTS = 3\nDEFAULT_TIMEOUT_SECONDS = 30\nAPI_BASE_URL = \"https://api.example.com\"\nALLOWED_FILE_EXTENSIONS = ['.jpg', '.png', '.gif']\n```\n\n```javascript\nconst MAX_LOGIN_ATTEMPTS = 5;\nconst SESSION_TIMEOUT_MS = 3600000;\nconst ERROR_MESSAGES = {\n  NOT_FOUND: 'Resource not found',\n  UNAUTHORIZED: 'Unauthorized access'\n};\n```\n\n## Interfaces and Types\n\n```typescript\n// Interfaces: Use \"I\" prefix or descriptive noun\ninterface IUser {\n  id: string;\n  name: string;\n}\n\ninterface Serializable {\n  serialize(): string;\n}\n\n// Types: Use descriptive names\ntype UserId = string;\ntype Callback = (error: Error | null, data: any) =\u003e void;\ntype HTTPMethod = 'GET' | 'POST' | 'PUT' | 'DELETE';\n```\n\n## File Naming\n\n```\ncomponents/\n  UserProfile.tsx          # PascalCase for components\n  user-settings.tsx        # kebab-case alternative\n  \nutils/\n  string-helpers.js        # kebab-case for utilities\n  dateFormatter.js         # camelCase alternative\n  \nconstants/\n  API_ENDPOINTS.js         # UPPER_SNAKE_CASE\n  \ntests/\n  user.test.js             # Match source file + .test\n  integration.spec.js      # Or .spec suffix\n```\n\n## Language-Specific Conventions\n\n### Python (PEP 8)\n\n```python\n# Variables and functions: snake_case\nuser_name = \"Alice\"\ndef calculate_total_price(items):\n    pass\n\n# Classes: PascalCase\nclass UserProfile:\n    pass\n\n# Constants: UPPER_SNAKE_CASE\nMAX_CONNECTIONS = 100\n\n# Private members: leading underscore\nclass Account:\n    def __init__(self):\n        self._balance = 0  # Protected\n        self.__secret = \"hidden\"  # Private\n```\n\n### JavaScript/TypeScript\n\n```typescript\n// Variables and functions: camelCase\nconst userName = \"Bob\";\nfunction calculateTotalPrice(items: Item[]): number {\n  return items.reduce((sum, item) =\u003e sum + item.price, 0);\n}\n\n// Classes and interfaces: PascalCase\nclass UserProfile { }\ninterface UserData { }\n\n// Constants: UPPER_SNAKE_CASE or camelCase\nconst MAX_CONNECTIONS = 100;\nconst defaultTimeout = 5000;\n```\n\n### Java\n\n```java\n// Variables and methods: camelCase\nString userName = \"Charlie\";\npublic int calculateTotalPrice(List\u003cItem\u003e items) { }\n\n// Classes and interfaces: PascalCase\npublic class UserProfile { }\npublic interface Serializable { }\n\n// Constants: UPPER_SNAKE_CASE\npublic static final int MAX_CONNECTIONS = 100;\n\n// Packages: lowercase\npackage com.example.project;\n```\n\n## Naming Anti-Patterns\n\n### Avoid\n\n```javascript\n// Single letter names (except loop counters)\nlet a = getUserData();\n\n// Meaningless names\nlet data, info, thing, stuff;\n\n// Hungarian notation in modern languages\nlet strName, intAge, bIsActive;\n\n// Encoded type information\nlet userMap, nameString, countInteger;\n\n// Overly abbreviated\nlet usrNm, calcTtl, procData;\n\n// Mental mapping required\nlet temp, foo, bar, baz;\n```\n\n## Good Examples\n\n```python\n# Clear, self-documenting code\ndef send_welcome_email_to_new_users(users):\n    for user in users:\n        if user.is_new and not user.welcome_email_sent:\n            email_service.send(\n                recipient=user.email,\n                template='welcome',\n                context={'name': user.full_name}\n            )\n            user.mark_welcome_email_sent()\n```\n\n```typescript\nclass OrderProcessor {\n  private readonly maxRetries = 3;\n  private readonly retryDelayMs = 1000;\n  \n  async processOrder(order: Order): Promise\u003cProcessedOrder\u003e {\n    const validatedOrder = this.validateOrder(order);\n    const paymentResult = await this.processPayment(validatedOrder);\n    \n    if (paymentResult.isSuccessful) {\n      return this.createProcessedOrder(validatedOrder, paymentResult);\n    }\n    \n    throw new PaymentFailedError(paymentResult.errorMessage);\n  }\n}\n```\n\nRemember: Good names make code self-documenting and reduce the need for comments!\n"])</script><script>self.__next_f.push([1,"b:T34ce,"])</script><script>self.__next_f.push([1,"# Error Handling Patterns\n\nRobust error handling is crucial for building reliable applications. Handle errors gracefully and provide meaningful feedback.\n\n## Core Principles\n\n1. **Fail fast** - Detect errors early\n2. **Be specific** - Use specific exception types\n3. **Don't swallow errors** - Always handle or propagate\n4. **Clean up resources** - Use try-finally or context managers\n5. **Log appropriately** - Record errors for debugging\n\n## Try-Catch Best Practices\n\n### JavaScript/TypeScript\n\n```typescript\n// Good: Specific error handling\nasync function fetchUserData(userId: string): Promise\u003cUser\u003e {\n  try {\n    const response = await fetch(`/api/users/${userId}`);\n    \n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n    }\n    \n    const data = await response.json();\n    return data;\n  } catch (error) {\n    if (error instanceof TypeError) {\n      // Network error\n      logger.error('Network error fetching user', { userId, error });\n      throw new NetworkError('Unable to reach server');\n    } else if (error instanceof SyntaxError) {\n      // JSON parsing error\n      logger.error('Invalid response format', { userId, error });\n      throw new DataFormatError('Server returned invalid data');\n    } else {\n      // Re-throw unknown errors\n      logger.error('Unexpected error', { userId, error });\n      throw error;\n    }\n  }\n}\n```\n\n### Python\n\n```python\n# Good: Multiple exception types\ndef read_config_file(filepath):\n    try:\n        with open(filepath, 'r') as f:\n            config = json.load(f)\n        return config\n    except FileNotFoundError:\n        logger.error(f\"Config file not found: {filepath}\")\n        return get_default_config()\n    except json.JSONDecodeError as e:\n        logger.error(f\"Invalid JSON in config: {e}\")\n        raise ConfigurationError(f\"Malformed config file: {filepath}\")\n    except PermissionError:\n        logger.error(f\"Permission denied reading: {filepath}\")\n        raise ConfigurationError(f\"Cannot read config file: {filepath}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error reading config: {e}\")\n        raise\n```\n\n## Custom Exception Classes\n\n### Python\n\n```python\nclass ApplicationError(Exception):\n    \"\"\"Base exception for application errors.\"\"\"\n    def __init__(self, message, code=None, details=None):\n        super().__init__(message)\n        self.code = code\n        self.details = details or {}\n\nclass ValidationError(ApplicationError):\n    \"\"\"Raised when input validation fails.\"\"\"\n    def __init__(self, message, field=None):\n        super().__init__(message, code='VALIDATION_ERROR')\n        self.field = field\n\nclass ResourceNotFoundError(ApplicationError):\n    \"\"\"Raised when a requested resource doesn't exist.\"\"\"\n    def __init__(self, resource_type, resource_id):\n        message = f\"{resource_type} with id {resource_id} not found\"\n        super().__init__(message, code='NOT_FOUND')\n        self.resource_type = resource_type\n        self.resource_id = resource_id\n\nclass AuthenticationError(ApplicationError):\n    \"\"\"Raised when authentication fails.\"\"\"\n    def __init__(self, message=\"Authentication failed\"):\n        super().__init__(message, code='AUTH_ERROR')\n\n# Usage\ndef get_user(user_id):\n    user = db.query(User).get(user_id)\n    if not user:\n        raise ResourceNotFoundError('User', user_id)\n    return user\n```\n\n### TypeScript\n\n```typescript\nclass ApplicationError extends Error {\n  constructor(\n    message: string,\n    public code: string,\n    public statusCode: number = 500,\n    public details?: Record\u003cstring, any\u003e\n  ) {\n    super(message);\n    this.name = this.constructor.name;\n    Error.captureStackTrace(this, this.constructor);\n  }\n}\n\nclass ValidationError extends ApplicationError {\n  constructor(message: string, public field?: string) {\n    super(message, 'VALIDATION_ERROR', 400, { field });\n  }\n}\n\nclass ResourceNotFoundError extends ApplicationError {\n  constructor(resourceType: string, resourceId: string) {\n    super(\n      `${resourceType} with id ${resourceId} not found`,\n      'NOT_FOUND',\n      404,\n      { resourceType, resourceId }\n    );\n  }\n}\n\nclass UnauthorizedError extends ApplicationError {\n  constructor(message = 'Unauthorized') {\n    super(message, 'UNAUTHORIZED', 401);\n  }\n}\n\n// Usage\nfunction getUser(userId: string): User {\n  const user = database.users.find(u =\u003e u.id === userId);\n  if (!user) {\n    throw new ResourceNotFoundError('User', userId);\n  }\n  return user;\n}\n```\n\n## Error Handling in Async Code\n\n### Promises\n\n```javascript\n// Good: Proper promise error handling\nfunction processUserData(userId) {\n  return fetchUser(userId)\n    .then(user =\u003e validateUser(user))\n    .then(validUser =\u003e enrichUserData(validUser))\n    .then(enrichedUser =\u003e saveUser(enrichedUser))\n    .catch(ValidationError, error =\u003e {\n      logger.warn('Validation failed', { userId, error });\n      return getDefaultUser(userId);\n    })\n    .catch(NetworkError, error =\u003e {\n      logger.error('Network error', { userId, error });\n      throw new ServiceUnavailableError('User service unavailable');\n    })\n    .catch(error =\u003e {\n      logger.error('Unexpected error processing user', { userId, error });\n      throw error;\n    });\n}\n```\n\n### Async/Await\n\n```typescript\n// Good: Clean async/await error handling\nasync function createOrder(orderData: OrderData): Promise\u003cOrder\u003e {\n  let transaction;\n  \n  try {\n    transaction = await db.beginTransaction();\n    \n    // Validate order\n    const validation = validateOrderData(orderData);\n    if (!validation.isValid) {\n      throw new ValidationError(validation.errors);\n    }\n    \n    // Check inventory\n    const inventoryCheck = await checkInventory(orderData.items);\n    if (!inventoryCheck.available) {\n      throw new InsufficientInventoryError(inventoryCheck.missing);\n    }\n    \n    // Create order\n    const order = await db.orders.create(orderData, { transaction });\n    \n    // Process payment\n    const payment = await processPayment(order.total, orderData.paymentMethod);\n    if (!payment.success) {\n      throw new PaymentFailedError(payment.reason);\n    }\n    \n    // Update inventory\n    await updateInventory(orderData.items, { transaction });\n    \n    await transaction.commit();\n    \n    logger.info('Order created successfully', { orderId: order.id });\n    return order;\n    \n  } catch (error) {\n    if (transaction) {\n      await transaction.rollback();\n    }\n    \n    if (error instanceof ValidationError) {\n      logger.warn('Order validation failed', { error });\n      throw error;\n    } else if (error instanceof PaymentFailedError) {\n      logger.error('Payment processing failed', { error });\n      throw error;\n    } else {\n      logger.error('Unexpected error creating order', { error });\n      throw new OrderCreationError('Failed to create order', error);\n    }\n  }\n}\n```\n\n## Resource Cleanup\n\n### Python Context Managers\n\n```python\nfrom contextlib import contextmanager\n\n@contextmanager\ndef database_connection(connection_string):\n    \"\"\"Ensure database connection is properly closed.\"\"\"\n    conn = None\n    try:\n        conn = create_connection(connection_string)\n        yield conn\n    except DatabaseError as e:\n        logger.error(f\"Database error: {e}\")\n        if conn:\n            conn.rollback()\n        raise\n    finally:\n        if conn:\n            conn.close()\n            logger.debug(\"Database connection closed\")\n\n# Usage\nwith database_connection(DB_URL) as conn:\n    cursor = conn.cursor()\n    cursor.execute(\"SELECT * FROM users\")\n    results = cursor.fetchall()\n```\n\n### Try-Finally\n\n```java\npublic void processFile(String filepath) throws IOException {\n    BufferedReader reader = null;\n    try {\n        reader = new BufferedReader(new FileReader(filepath));\n        String line;\n        while ((line = reader.readLine()) != null) {\n            processLine(line);\n        }\n    } catch (FileNotFoundException e) {\n        logger.error(\"File not found: \" + filepath, e);\n        throw new ProcessingException(\"Cannot process file\", e);\n    } catch (IOException e) {\n        logger.error(\"Error reading file: \" + filepath, e);\n        throw new ProcessingException(\"Error processing file\", e);\n    } finally {\n        if (reader != null) {\n            try {\n                reader.close();\n            } catch (IOException e) {\n                logger.warn(\"Error closing reader\", e);\n            }\n        }\n    }\n}\n\n// Better: Try-with-resources (Java 7+)\npublic void processFile(String filepath) throws ProcessingException {\n    try (BufferedReader reader = new BufferedReader(new FileReader(filepath))) {\n        String line;\n        while ((line = reader.readLine()) != null) {\n            processLine(line);\n        }\n    } catch (FileNotFoundException e) {\n        logger.error(\"File not found: \" + filepath, e);\n        throw new ProcessingException(\"Cannot process file\", e);\n    } catch (IOException e) {\n        logger.error(\"Error reading file: \" + filepath, e);\n        throw new ProcessingException(\"Error processing file\", e);\n    }\n}\n```\n\n## Error Responses in APIs\n\n```typescript\n// Express.js error handler middleware\ninterface ErrorResponse {\n  error: {\n    code: string;\n    message: string;\n    details?: any;\n  };\n  requestId?: string;\n}\n\nfunction errorHandler(\n  err: Error,\n  req: Request,\n  res: Response,\n  next: NextFunction\n): void {\n  const requestId = req.headers['x-request-id'] as string;\n  \n  logger.error('API error', {\n    error: err,\n    requestId,\n    method: req.method,\n    path: req.path,\n    ip: req.ip\n  });\n  \n  if (err instanceof ValidationError) {\n    const response: ErrorResponse = {\n      error: {\n        code: err.code,\n        message: err.message,\n        details: err.details\n      },\n      requestId\n    };\n    return res.status(400).json(response);\n  }\n  \n  if (err instanceof UnauthorizedError) {\n    const response: ErrorResponse = {\n      error: {\n        code: 'UNAUTHORIZED',\n        message: 'Authentication required'\n      },\n      requestId\n    };\n    return res.status(401).json(response);\n  }\n  \n  if (err instanceof ResourceNotFoundError) {\n    const response: ErrorResponse = {\n      error: {\n        code: 'NOT_FOUND',\n        message: err.message\n      },\n      requestId\n    };\n    return res.status(404).json(response);\n  }\n  \n  // Default: Don't leak internal errors\n  const response: ErrorResponse = {\n    error: {\n      code: 'INTERNAL_ERROR',\n      message: 'An unexpected error occurred'\n    },\n    requestId\n  };\n  res.status(500).json(response);\n}\n\napp.use(errorHandler);\n```\n\n## Retry Logic\n\n```python\nimport time\nfrom functools import wraps\n\ndef retry(max_attempts=3, delay=1, backoff=2, exceptions=(Exception,)):\n    \"\"\"Retry decorator with exponential backoff.\"\"\"\n    def decorator(func):\n        @wraps(func)\n        def wrapper(*args, **kwargs):\n            attempt = 0\n            current_delay = delay\n            \n            while attempt \u003c max_attempts:\n                try:\n                    return func(*args, **kwargs)\n                except exceptions as e:\n                    attempt += 1\n                    if attempt \u003e= max_attempts:\n                        logger.error(f\"Failed after {max_attempts} attempts: {e}\")\n                        raise\n                    \n                    logger.warning(\n                        f\"Attempt {attempt} failed, retrying in {current_delay}s: {e}\"\n                    )\n                    time.sleep(current_delay)\n                    current_delay *= backoff\n            \n        return wrapper\n    return decorator\n\n# Usage\n@retry(max_attempts=5, delay=1, backoff=2, exceptions=(NetworkError, TimeoutError))\ndef fetch_external_data(url):\n    response = requests.get(url, timeout=10)\n    response.raise_for_status()\n    return response.json()\n```\n\n## Defensive Programming\n\n```python\ndef calculate_average(numbers):\n    \"\"\"Calculate average with defensive checks.\"\"\"\n    # Input validation\n    if numbers is None:\n        raise ValueError(\"numbers cannot be None\")\n    \n    if not isinstance(numbers, (list, tuple)):\n        raise TypeError(f\"Expected list or tuple, got {type(numbers)}\")\n    \n    if len(numbers) == 0:\n        raise ValueError(\"Cannot calculate average of empty list\")\n    \n    # Check all elements are numeric\n    if not all(isinstance(n, (int, float)) for n in numbers):\n        raise TypeError(\"All elements must be numeric\")\n    \n    # Perform calculation\n    total = sum(numbers)\n    count = len(numbers)\n    \n    return total / count\n```\n\n## Logging Best Practices\n\n```typescript\n// Structured logging with context\nimport winston from 'winston';\n\nconst logger = winston.createLogger({\n  level: 'info',\n  format: winston.format.json(),\n  transports: [\n    new winston.transports.File({ filename: 'error.log', level: 'error' }),\n    new winston.transports.File({ filename: 'combined.log' })\n  ]\n});\n\nfunction processPayment(orderId: string, amount: number) {\n  const context = { orderId, amount };\n  \n  try {\n    logger.info('Processing payment', context);\n    \n    const result = paymentGateway.charge(amount);\n    \n    logger.info('Payment processed successfully', {\n      ...context,\n      transactionId: result.transactionId\n    });\n    \n    return result;\n  } catch (error) {\n    logger.error('Payment processing failed', {\n      ...context,\n      error: error.message,\n      stack: error.stack\n    });\n    \n    throw new PaymentError('Payment processing failed', error);\n  }\n}\n```\n\nRemember: Good error handling makes your application resilient and maintainable!\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"TPhATwRfMDxq9-9GUzk2V\",\"c\":[\"\",\"\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"__PAGE__\",{}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/prompts/_next/static/chunks/1d5639018d1afc60.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/prompts/_next/static/chunks/b4ddc1a8749ef82e.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_2ae47f08-module__h69qWW__variable geist_mono_eb58308d-module__w_p2Lq__variable\",\"children\":[\"$\",\"$L2\",null,{\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"$L5\",null,{\"initialSnippets\":[{\"id\":\"snippets/security/input-validation.md\",\"title\":\"Input Validation\",\"category\":\"security\",\"content\":\"$6\",\"filePath\":\"snippets/security/input-validation.md\",\"editUrl\":\"https://github.com/jjgroenendijk/prompts/edit/main/snippets/security/input-validation.md\"},{\"id\":\"snippets/security/authentication.md\",\"title\":\"Authentication\",\"category\":\"security\",\"content\":\"$7\",\"filePath\":\"snippets/security/authentication.md\",\"editUrl\":\"https://github.com/jjgroenendijk/prompts/edit/main/snippets/security/authentication.md\"},{\"id\":\"snippets/prompts/debugging.md\",\"title\":\"Debugging\",\"category\":\"prompts\",\"content\":\"$8\",\"filePath\":\"snippets/prompts/debugging.md\",\"editUrl\":\"https://github.com/jjgroenendijk/prompts/edit/main/snippets/prompts/debugging.md\"},{\"id\":\"snippets/prompts/code-review.md\",\"title\":\"Code Review\",\"category\":\"prompts\",\"content\":\"$9\",\"filePath\":\"snippets/prompts/code-review.md\",\"editUrl\":\"https://github.com/jjgroenendijk/prompts/edit/main/snippets/prompts/code-review.md\"},{\"id\":\"snippets/coding-style/naming-conventions.md\",\"title\":\"Naming Conventions\",\"category\":\"coding-style\",\"content\":\"$a\",\"filePath\":\"snippets/coding-style/naming-conventions.md\",\"editUrl\":\"https://github.com/jjgroenendijk/prompts/edit/main/snippets/coding-style/naming-conventions.md\"},{\"id\":\"snippets/coding-style/error-handling.md\",\"title\":\"Error Handling\",\"category\":\"coding-style\",\"content\":\"$b\",\"filePath\":\"snippets/coding-style/error-handling.md\",\"editUrl\":\"https://github.com/jjgroenendijk/prompts/edit/main/snippets/coding-style/error-handling.md\"}],\"config\":{\"site\":{\"title\":\"Prompt Rule Selector\",\"description\":\"Select and combine AI coding rules and prompts\",\"baseUrl\":\"https://jjgroenendijk.nl/prompts\",\"basePath\":\"/prompts\"},\"github\":{\"owner\":\"jjgroenendijk\",\"repo\":\"prompts\",\"defaultBranch\":\"main\"},\"ui\":{\"previewCharLimit\":400,\"searchPlaceholder\":\"Search rules...\",\"copyButtonText\":\"Copy Selected Rules\",\"addButtonText\":\"Add New Rule\",\"configButtonText\":\"Settings\"},\"rules\":{\"separator\":\"\\n\\n---\\n\\n\",\"includeTitle\":true}},\"urls\":{\"create\":\"https://github.com/jjgroenendijk/prompts/new/main?filename=snippets/new-rule.md\",\"config\":\"https://github.com/jjgroenendijk/prompts/edit/main/config.yml\"}}],[\"$Lc\"],\"$Ld\"]}],{},null,false,false]},null,false,false],\"$Le\",false]],\"m\":\"$undefined\",\"G\":[\"$f\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"10:I[97367,[\"/prompts/_next/static/chunks/42879de7b8087bc9.js\"],\"OutletBoundary\"]\n11:\"$Sreact.suspense\"\n13:I[97367,[\"/prompts/_next/static/chunks/42879de7b8087bc9.js\"],\"ViewportBoundary\"]\n15:I[97367,[\"/prompts/_next/static/chunks/42879de7b8087bc9.js\"],\"MetadataBoundary\"]\nc:[\"$\",\"script\",\"script-0\",{\"src\":\"/prompts/_next/static/chunks/5ccbe578a5df9eac.js\",\"async\":true,\"nonce\":\"$undefined\"}]\nd:[\"$\",\"$L10\",null,{\"children\":[\"$\",\"$11\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@12\"}]}]\ne:[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L13\",null,{\"children\":\"$@14\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$L15\",null,{\"children\":[\"$\",\"$11\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@16\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}]\n"])</script><script>self.__next_f.push([1,"14:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"17:I[27201,[\"/prompts/_next/static/chunks/42879de7b8087bc9.js\"],\"IconMark\"]\n16:[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/prompts/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$L17\",\"3\",{}]]\n12:null\n"])</script></body></html>